<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 14.2.0"/>
    <title>open_precision.core.model API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}td.linenos .normal{color:inherit; background-color:transparent; padding-left:5px; padding-right:5px;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:5px;}td.linenos .special{color:#000000; background-color:#ffffc0; padding-left:5px; padding-right:5px;}span.linenos.special{color:#000000; background-color:#ffffc0; padding-left:5px; padding-right:5px;}body .hll{background-color:#ffffcc}body{background:#ffffff;}body .c{color:#9E9E9E; font-style:italic}body .k{color:#2494BF; font-weight:bold}body .ch{color:#9E9E9E; font-style:italic}body .cm{color:#9E9E9E; font-style:italic}body .cp{color:#9E9E9E; font-style:italic}body .cpf{color:#9E9E9E; font-style:italic}body .c1{color:#9E9E9E; font-style:italic}body .cs{color:#9E9E9E; font-style:italic}body .kc{color:#2494BF; font-weight:bold}body .kd{color:#2494BF; font-weight:bold}body .kn{color:#2494BF; font-weight:bold}body .kp{color:#2494BF; font-weight:bold}body .kr{color:#2494BF; font-weight:bold}body .kt{color:#2494BF; font-weight:bold}body .s{color:#009688}body .nb{color:#3949AB}body .nc{color:#800080; font-weight:bold}body .nf{color:#800080}body .nv{color:#D81B60}body .ow{color:#00897B; font-weight:bold}body .sa{color:#009688}body .sb{color:#009688}body .sc{color:#009688}body .dl{color:#009688}body .sd{color:#9E9E9E; font-style:italic}body .s2{color:#009688}body .se{color:#009688}body .sh{color:#009688}body .si{color:#009688}body .sx{color:#009688}body .sr{color:#009688}body .s1{color:#009688}body .ss{color:#009688}body .bp{color:#3949AB}body .fm{color:#800080}body .vc{color:#D81B60}body .vg{color:#D81B60}body .vi{color:#D81B60}body .vm{color:#D81B60}</style>
    <style>/*! theme.css */.pdoc{--link:purple;--link-hover:#03A9F4;--active:#F3E5F5;--accent:#e0e0e0;--name:purple;}pre{line-height:125%;}td.linenos .normal{color:#CFD8DC; background-color:transparent; padding-left:5px; padding-right:20px;}span.linenos{color:#CFD8DC; background-color:transparent; padding-left:5px; padding-right:20px;}td.linenos .special{color:#000000; background-color:#ffffc0; padding-left:5px; padding-right:5px;}span.linenos.special{color:#000000; background-color:#ffffc0; padding-left:5px; padding-right:5px;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .pdoc-alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:1rem center;margin-bottom:1rem;}.pdoc .pdoc-alert > *:last-child{margin-bottom:0;}.pdoc .pdoc-alert-note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */@import url('https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@300;400;500;600;700;800&display=swap');.modulename{color:#4A148C;}.pdoc img{  max-width:500px;  max-height:800px;  width:100%;  object-fit:100%;}.pdoc img[alt=nimage]{width:350px;}.pdoc img[alt=wimage]{max-width:800px;}.pdoc code{font-family:'Source Code Pro', monospace !important;font-weight:400;color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc .view-source-button{font-family:sans-serif;}.pdoc .docstring .pdoc-code{font-family:'Source Code Pro', monospace !important;margin-left:1em;margin-right:1em;}.pdoc .pdoc-code pre{font-family:'Source Code Pro', monospace !important;font-size:80%;margin-left:1em;margin-right:1em;}.pdoc .name{font-weight:800;}.pdoc .attr.function{font-family:'Source Code Pro', monospace;font-weight:400;font-size:90%;display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:#F5F5F5;overflow-x:auto;}.pdoc .attr:hover{background-color:#E1BEE7;}.pdoc .def{font-weight:600;}.pdoc a.function{font-family:'Source Code Pro', monospace !important;font-size:90%;font-weight:500;}.pdoc a.class{font-family:'Source Code Pro', monospace !important;font-size:90%;font-weight:500;}.pdoc a.variable{font-family:'Source Code Pro', monospace !important;font-size:90%;font-weight:500;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:#FFFFFF;border-right:1px solid var(--accent2);box-shadow:0 0 0px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;}nav.pdoc input[type=search]{ display:block; outline-offset:0; width:calc(100% - var(--pad)); border:none;}.pdoc .pdoc-button{border:none;}.pdoc .attribution{font-size:80%;}</style><script>
    window.MathJax = {
        tex: {
            inlineMath: [['$', '$'], ['\\(', '\\)']]
        }
    };
</script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script>
    /* Re-invoke MathJax when DOM content changes, for example during search. */
    document.addEventListener("DOMContentLoaded", () => {
        new MutationObserver(() => MathJax.typeset()).observe(
            document.querySelector("main.pdoc").parentNode,
            {childList: true}
        );
    })
</script>
<style>
    mjx-container {
        overflow-x: auto;
    }
</style><style>
    .pdoc .mermaid-pre {
        border: none;
        background: none;
    }
</style>
<script type="module" defer>
    import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs";

    /* Re-invoke Mermaid when DOM content changes, for example during search. */
    document.addEventListener("DOMContentLoaded", () => {
        new MutationObserver(() => mermaid.run()).observe(
            document.querySelector("main.pdoc").parentNode,
            {childList: true}
        );
    })
</script></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../core.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;open_precision.core</a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>

            <h2>Contents</h2>
            <ul>
  <li><a href="#the-model-implementation">The Model Implementation</a>
  <ul>
    <li><a href="#nodes">Nodes</a></li>
    <li><a href="#data-classes">Data Classes</a></li>
  </ul></li>
  <li><a href="#json-serialization">JSON Serialization</a></li>
</ul>


            <h2>Submodules</h2>
            <ul>
                    <li><a href="model/action.html">action</a></li>
                    <li><a href="model/action_response.html">action_response</a></li>
                    <li><a href="model/course.html">course</a></li>
                    <li><a href="model/data_subscription.html">data_subscription</a></li>
                    <li><a href="model/location.html">location</a></li>
                    <li><a href="model/orientation.html">orientation</a></li>
                    <li><a href="model/path.html">path</a></li>
                    <li><a href="model/position.html">position</a></li>
                    <li><a href="model/system_configuration.html">system_configuration</a></li>
                    <li><a href="model/vehicle.html">vehicle</a></li>
                    <li><a href="model/vehicle_state.html">vehicle_state</a></li>
                    <li><a href="model/waypoint.html">waypoint</a></li>
            </ul>

            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="variable" href="#signature_class_mapping">signature_class_mapping</a>
            </li>
            <li>
                    <a class="variable" href="#class_signature_mapping">class_signature_mapping</a>
            </li>
            <li>
                    <a class="function" href="#persist_return">persist_return</a>
            </li>
            <li>
                    <a class="function" href="#persist_arg">persist_arg</a>
            </li>
            <li>
                    <a class="class" href="#DataModelBase">DataModelBase</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#DataModelBase.to_json">to_json</a>
                        </li>
                        <li>
                                <a class="function" href="#DataModelBase.from_json">from_json</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#CustomJSONEncoder">CustomJSONEncoder</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#CustomJSONEncoder.__init__">CustomJSONEncoder</a>
                        </li>
                        <li>
                                <a class="variable" href="#CustomJSONEncoder.field_key_filter">field_key_filter</a>
                        </li>
                        <li>
                                <a class="variable" href="#CustomJSONEncoder.field_type_filter">field_type_filter</a>
                        </li>
                        <li>
                                <a class="function" href="#CustomJSONEncoder.default">default</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#CustomJSONDecoder">CustomJSONDecoder</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#CustomJSONDecoder.__init__">CustomJSONDecoder</a>
                        </li>
                        <li>
                                <a class="function" href="#CustomJSONDecoder.object_hook">object_hook</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#CustomJSONProperty">CustomJSONProperty</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#CustomJSONProperty.__init__">CustomJSONProperty</a>
                        </li>
                        <li>
                                <a class="function" href="#CustomJSONProperty.inflate">inflate</a>
                        </li>
                        <li>
                                <a class="function" href="#CustomJSONProperty.deflate">deflate</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="function" href="#map_model">map_model</a>
            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">built with pdoc 
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
<a href="./../../open_precision.html">open_precision</a><wbr>.<a href="./../core.html">core</a><wbr>.model    </h1>

                        <div class="docstring"><p>model graph infrastructure:
<a href="https://arrows.app/#/import/json=eyJncmFwaCI6eyJzdHlsZSI6eyJmb250LWZhbWlseSI6InNhbnMtc2VyaWYiLCJiYWNrZ3JvdW5kLWNvbG9yIjoiI2ZmZmZmZiIsImJhY2tncm91bmQtaW1hZ2UiOiIiLCJiYWNrZ3JvdW5kLXNpemUiOiIxMDAlIiwibm9kZS1jb2xvciI6IiNmZmZmZmYiLCJib3JkZXItd2lkdGgiOjQsImJvcmRlci1jb2xvciI6IiMwMDAwMDAiLCJyYWRpdXMiOjUwLCJub2RlLXBhZGRpbmciOjUsIm5vZGUtbWFyZ2luIjoyLCJvdXRzaWRlLXBvc2l0aW9uIjoiYXV0byIsIm5vZGUtaWNvbi1pbWFnZSI6IiIsIm5vZGUtYmFja2dyb3VuZC1pbWFnZSI6IiIsImljb24tcG9zaXRpb24iOiJpbnNpZGUiLCJpY29uLXNpemUiOjY0LCJjYXB0aW9uLXBvc2l0aW9uIjoiaW5zaWRlIiwiY2FwdGlvbi1tYXgtd2lkdGgiOjIwMCwiY2FwdGlvbi1jb2xvciI6IiMwMDAwMDAiLCJjYXB0aW9uLWZvbnQtc2l6ZSI6NTAsImNhcHRpb24tZm9udC13ZWlnaHQiOiJub3JtYWwiLCJsYWJlbC1wb3NpdGlvbiI6Imluc2lkZSIsImxhYmVsLWRpc3BsYXkiOiJwaWxsIiwibGFiZWwtY29sb3IiOiIjMDAwMDAwIiwibGFiZWwtYmFja2dyb3VuZC1jb2xvciI6IiNmZmZmZmYiLCJsYWJlbC1ib3JkZXItY29sb3IiOiIjMDAwMDAwIiwibGFiZWwtYm9yZGVyLXdpZHRoIjo0LCJsYWJlbC1mb250LXNpemUiOjQwLCJsYWJlbC1wYWRkaW5nIjo1LCJsYWJlbC1tYXJnaW4iOjQsImRpcmVjdGlvbmFsaXR5IjoiZGlyZWN0ZWQiLCJkZXRhaWwtcG9zaXRpb24iOiJpbmxpbmUiLCJkZXRhaWwtb3JpZW50YXRpb24iOiJwYXJhbGxlbCIsImFycm93LXdpZHRoIjo1LCJhcnJvdy1jb2xvciI6IiMwMDAwMDAiLCJtYXJnaW4tc3RhcnQiOjUsIm1hcmdpbi1lbmQiOjUsIm1hcmdpbi1wZWVyIjoyMCwiYXR0YWNobWVudC1zdGFydCI6Im5vcm1hbCIsImF0dGFjaG1lbnQtZW5kIjoibm9ybWFsIiwicmVsYXRpb25zaGlwLWljb24taW1hZ2UiOiIiLCJ0eXBlLWNvbG9yIjoiIzAwMDAwMCIsInR5cGUtYmFja2dyb3VuZC1jb2xvciI6IiNmZmZmZmYiLCJ0eXBlLWJvcmRlci1jb2xvciI6IiMwMDAwMDAiLCJ0eXBlLWJvcmRlci13aWR0aCI6MCwidHlwZS1mb250LXNpemUiOjE2LCJ0eXBlLXBhZGRpbmciOjUsInByb3BlcnR5LXBvc2l0aW9uIjoib3V0c2lkZSIsInByb3BlcnR5LWFsaWdubWVudCI6ImNvbG9uIiwicHJvcGVydHktY29sb3IiOiIjMDAwMDAwIiwicHJvcGVydHktZm9udC1zaXplIjoxNiwicHJvcGVydHktZm9udC13ZWlnaHQiOiJub3JtYWwifSwibm9kZXMiOlt7ImlkIjoibjAiLCJwb3NpdGlvbiI6eyJ4IjotNC4xMjQzMzk0MDIzMjAxMDllLTMyLCJ5IjotMzAuNTYwOTQ5MjEyNTE5MDM0fSwiY2FwdGlvbiI6IiIsImxhYmVscyI6WyJBY3Rpb24iXSwicHJvcGVydGllcyI6eyJpZCI6InN0ciIsImluaXRpYXRvciI6InN0ciIsImZ1bmN0aW9uX2lkZW50aWZpZXIiOiJzdHIiLCJhcmdzIjoiTGlzdFtBbnldIiwia3dfYXJncyI6IkRpY3Rbc3RyLCBBbnldIn0sInN0eWxlIjp7fX0seyJpZCI6Im4xIiwicG9zaXRpb24iOnsieCI6MCwieSI6MzAwfSwiY2FwdGlvbiI6IiIsImxhYmVscyI6WyJBY3Rpb25fcmVzcG9uc2UiXSwicHJvcGVydGllcyI6eyJpZCI6InN0ciIsInN1Y2Nlc3MiOiJib29sIiwicmVzcG9uc2UiOiJzdHIifSwic3R5bGUiOnt9fSx7ImlkIjoibjIiLCJwb3NpdGlvbiI6eyJ4IjozMDAsInkiOi0zMC41NjA5NDkyMTI1MTkwMzR9LCJjYXB0aW9uIjoiIiwibGFiZWxzIjpbIkNvdXJzZSJdLCJwcm9wZXJ0aWVzIjp7ImlkIjoic3RyIiwibmFtZSI6InN0ciIsImRlc2NyaXB0aW9uIjoic3RyIn0sInN0eWxlIjp7fX0seyJpZCI6Im40IiwicG9zaXRpb24iOnsieCI6NjAwLCJ5IjoyMTguNDAxNTU5NzQxNjEzfSwiY2FwdGlvbiI6IiIsImxhYmVscyI6WyJXYXlwb2ludCJdLCJwcm9wZXJ0aWVzIjp7ImlkIjoic3RyIiwibG9jYXRpb24iOiJMb2NhdGlvbiJ9LCJzdHlsZSI6e319LHsiaWQiOiJuNSIsInBvc2l0aW9uIjp7IngiOjQyMSwieSI6NDExfSwiY2FwdGlvbiI6IiIsImxhYmVscyI6WyJWZWhpY2xlIl0sInByb3BlcnRpZXMiOnsiaWQiOiJzdHIiLCJuYW1lIjoic3RyIiwidHVybl9yYWRpdXNfbGVmdCI6ImZsb2F0IiwidHVybl9yYWRpdXNfcmlnaHQiOiJmbG9hdCIsIndoZWVsYmFzZSI6ImZsb2F0IiwiZ3BzX3JlY2VpdmVyX29mZnNldCI6Ikxpc3RbZmxvYXRdIn0sInN0eWxlIjp7fX0seyJpZCI6Im43IiwicG9zaXRpb24iOnsieCI6NjMxLjY1MDE2MjM0NTczMzEsInkiOi0zMC41NjA5NDkyMTI1MTkwMzR9LCJjYXB0aW9uIjoiIiwic3R5bGUiOnt9LCJsYWJlbHMiOlsiUGF0aCJdLCJwcm9wZXJ0aWVzIjp7ImlkIjoic3RyIn19LHsiaWQiOiJuOCIsInBvc2l0aW9uIjp7IngiOjc0NywieSI6NjEyfSwiY2FwdGlvbiI6IiIsInN0eWxlIjp7fSwibGFiZWxzIjpbIlZlaGljbGVTdGF0ZSJdLCJwcm9wZXJ0aWVzIjp7ImlkIjoic3RyIiwic3RlZXJpbmdfYW5nbGUiOiJmbG9hdCIsInNwZWVkIjoiZmxvYXQiLCJwb3NpdGlvbiI6IlBvc2l0aW9uIn19XSwicmVsYXRpb25zaGlwcyI6W3siaWQiOiJuMCIsImZyb21JZCI6Im4wIiwidG9JZCI6Im4xIiwidHlwZSI6InJldHVybnMiLCJwcm9wZXJ0aWVzIjp7fSwic3R5bGUiOnt9fSx7ImlkIjoibjIiLCJ0eXBlIjoiU1VDQ0VTU09SIiwic3R5bGUiOnt9LCJwcm9wZXJ0aWVzIjp7fSwiZnJvbUlkIjoibjQiLCJ0b0lkIjoibjQifSx7ImlkIjoibjYiLCJ0eXBlIjoiQ09OVEFJTlMiLCJzdHlsZSI6e30sInByb3BlcnRpZXMiOnt9LCJmcm9tSWQiOiJuMiIsInRvSWQiOiJuNCJ9LHsiaWQiOiJuNyIsInR5cGUiOiJDT05UQUlOUyIsInN0eWxlIjp7fSwicHJvcGVydGllcyI6e30sImZyb21JZCI6Im4yIiwidG9JZCI6Im43In0seyJpZCI6Im44IiwidHlwZSI6IkNPTlRBSU5TIiwic3R5bGUiOnt9LCJwcm9wZXJ0aWVzIjp7fSwiZnJvbUlkIjoibjciLCJ0b0lkIjoibjQifSx7ImlkIjoibjkiLCJ0eXBlIjoiUkVRVUlSRVMiLCJzdHlsZSI6e30sInByb3BlcnRpZXMiOnt9LCJmcm9tSWQiOiJuNyIsInRvSWQiOiJuNyJ9XX0sImRpYWdyYW1OYW1lIjoiSW1wb3J0ZWQgZnJvbSBodHRwczovL3d3dy5hcGNqb25lcy5jb20vYXJyb3dzLyJ9">https://arrows.app/#/import/json=eyJncmFwaCI6eyJzdHlsZSI6eyJmb250LWZhbWlseSI6InNhbnMtc2VyaWYiLCJiYWNrZ3JvdW5kLWNvbG9yIjoiI2ZmZmZmZiIsImJhY2tncm91bmQtaW1hZ2UiOiIiLCJiYWNrZ3JvdW5kLXNpemUiOiIxMDAlIiwibm9kZS1jb2xvciI6IiNmZmZmZmYiLCJib3JkZXItd2lkdGgiOjQsImJvcmRlci1jb2xvciI6IiMwMDAwMDAiLCJyYWRpdXMiOjUwLCJub2RlLXBhZGRpbmciOjUsIm5vZGUtbWFyZ2luIjoyLCJvdXRzaWRlLXBvc2l0aW9uIjoiYXV0byIsIm5vZGUtaWNvbi1pbWFnZSI6IiIsIm5vZGUtYmFja2dyb3VuZC1pbWFnZSI6IiIsImljb24tcG9zaXRpb24iOiJpbnNpZGUiLCJpY29uLXNpemUiOjY0LCJjYXB0aW9uLXBvc2l0aW9uIjoiaW5zaWRlIiwiY2FwdGlvbi1tYXgtd2lkdGgiOjIwMCwiY2FwdGlvbi1jb2xvciI6IiMwMDAwMDAiLCJjYXB0aW9uLWZvbnQtc2l6ZSI6NTAsImNhcHRpb24tZm9udC13ZWlnaHQiOiJub3JtYWwiLCJsYWJlbC1wb3NpdGlvbiI6Imluc2lkZSIsImxhYmVsLWRpc3BsYXkiOiJwaWxsIiwibGFiZWwtY29sb3IiOiIjMDAwMDAwIiwibGFiZWwtYmFja2dyb3VuZC1jb2xvciI6IiNmZmZmZmYiLCJsYWJlbC1ib3JkZXItY29sb3IiOiIjMDAwMDAwIiwibGFiZWwtYm9yZGVyLXdpZHRoIjo0LCJsYWJlbC1mb250LXNpemUiOjQwLCJsYWJlbC1wYWRkaW5nIjo1LCJsYWJlbC1tYXJnaW4iOjQsImRpcmVjdGlvbmFsaXR5IjoiZGlyZWN0ZWQiLCJkZXRhaWwtcG9zaXRpb24iOiJpbmxpbmUiLCJkZXRhaWwtb3JpZW50YXRpb24iOiJwYXJhbGxlbCIsImFycm93LXdpZHRoIjo1LCJhcnJvdy1jb2xvciI6IiMwMDAwMDAiLCJtYXJnaW4tc3RhcnQiOjUsIm1hcmdpbi1lbmQiOjUsIm1hcmdpbi1wZWVyIjoyMCwiYXR0YWNobWVudC1zdGFydCI6Im5vcm1hbCIsImF0dGFjaG1lbnQtZW5kIjoibm9ybWFsIiwicmVsYXRpb25zaGlwLWljb24taW1hZ2UiOiIiLCJ0eXBlLWNvbG9yIjoiIzAwMDAwMCIsInR5cGUtYmFja2dyb3VuZC1jb2xvciI6IiNmZmZmZmYiLCJ0eXBlLWJvcmRlci1jb2xvciI6IiMwMDAwMDAiLCJ0eXBlLWJvcmRlci13aWR0aCI6MCwidHlwZS1mb250LXNpemUiOjE2LCJ0eXBlLXBhZGRpbmciOjUsInByb3BlcnR5LXBvc2l0aW9uIjoib3V0c2lkZSIsInByb3BlcnR5LWFsaWdubWVudCI6ImNvbG9uIiwicHJvcGVydHktY29sb3IiOiIjMDAwMDAwIiwicHJvcGVydHktZm9udC1zaXplIjoxNiwicHJvcGVydHktZm9udC13ZWlnaHQiOiJub3JtYWwifSwibm9kZXMiOlt7ImlkIjoibjAiLCJwb3NpdGlvbiI6eyJ4IjotNC4xMjQzMzk0MDIzMjAxMDllLTMyLCJ5IjotMzAuNTYwOTQ5MjEyNTE5MDM0fSwiY2FwdGlvbiI6IiIsImxhYmVscyI6WyJBY3Rpb24iXSwicHJvcGVydGllcyI6eyJpZCI6InN0ciIsImluaXRpYXRvciI6InN0ciIsImZ1bmN0aW9uX2lkZW50aWZpZXIiOiJzdHIiLCJhcmdzIjoiTGlzdFtBbnldIiwia3dfYXJncyI6IkRpY3Rbc3RyLCBBbnldIn0sInN0eWxlIjp7fX0seyJpZCI6Im4xIiwicG9zaXRpb24iOnsieCI6MCwieSI6MzAwfSwiY2FwdGlvbiI6IiIsImxhYmVscyI6WyJBY3Rpb25fcmVzcG9uc2UiXSwicHJvcGVydGllcyI6eyJpZCI6InN0ciIsInN1Y2Nlc3MiOiJib29sIiwicmVzcG9uc2UiOiJzdHIifSwic3R5bGUiOnt9fSx7ImlkIjoibjIiLCJwb3NpdGlvbiI6eyJ4IjozMDAsInkiOi0zMC41NjA5NDkyMTI1MTkwMzR9LCJjYXB0aW9uIjoiIiwibGFiZWxzIjpbIkNvdXJzZSJdLCJwcm9wZXJ0aWVzIjp7ImlkIjoic3RyIiwibmFtZSI6InN0ciIsImRlc2NyaXB0aW9uIjoic3RyIn0sInN0eWxlIjp7fX0seyJpZCI6Im40IiwicG9zaXRpb24iOnsieCI6NjAwLCJ5IjoyMTguNDAxNTU5NzQxNjEzfSwiY2FwdGlvbiI6IiIsImxhYmVscyI6WyJXYXlwb2ludCJdLCJwcm9wZXJ0aWVzIjp7ImlkIjoic3RyIiwibG9jYXRpb24iOiJMb2NhdGlvbiJ9LCJzdHlsZSI6e319LHsiaWQiOiJuNSIsInBvc2l0aW9uIjp7IngiOjQyMSwieSI6NDExfSwiY2FwdGlvbiI6IiIsImxhYmVscyI6WyJWZWhpY2xlIl0sInByb3BlcnRpZXMiOnsiaWQiOiJzdHIiLCJuYW1lIjoic3RyIiwidHVybl9yYWRpdXNfbGVmdCI6ImZsb2F0IiwidHVybl9yYWRpdXNfcmlnaHQiOiJmbG9hdCIsIndoZWVsYmFzZSI6ImZsb2F0IiwiZ3BzX3JlY2VpdmVyX29mZnNldCI6Ikxpc3RbZmxvYXRdIn0sInN0eWxlIjp7fX0seyJpZCI6Im43IiwicG9zaXRpb24iOnsieCI6NjMxLjY1MDE2MjM0NTczMzEsInkiOi0zMC41NjA5NDkyMTI1MTkwMzR9LCJjYXB0aW9uIjoiIiwic3R5bGUiOnt9LCJsYWJlbHMiOlsiUGF0aCJdLCJwcm9wZXJ0aWVzIjp7ImlkIjoic3RyIn19LHsiaWQiOiJuOCIsInBvc2l0aW9uIjp7IngiOjc0NywieSI6NjEyfSwiY2FwdGlvbiI6IiIsInN0eWxlIjp7fSwibGFiZWxzIjpbIlZlaGljbGVTdGF0ZSJdLCJwcm9wZXJ0aWVzIjp7ImlkIjoic3RyIiwic3RlZXJpbmdfYW5nbGUiOiJmbG9hdCIsInNwZWVkIjoiZmxvYXQiLCJwb3NpdGlvbiI6IlBvc2l0aW9uIn19XSwicmVsYXRpb25zaGlwcyI6W3siaWQiOiJuMCIsImZyb21JZCI6Im4wIiwidG9JZCI6Im4xIiwidHlwZSI6InJldHVybnMiLCJwcm9wZXJ0aWVzIjp7fSwic3R5bGUiOnt9fSx7ImlkIjoibjIiLCJ0eXBlIjoiU1VDQ0VTU09SIiwic3R5bGUiOnt9LCJwcm9wZXJ0aWVzIjp7fSwiZnJvbUlkIjoibjQiLCJ0b0lkIjoibjQifSx7ImlkIjoibjYiLCJ0eXBlIjoiQ09OVEFJTlMiLCJzdHlsZSI6e30sInByb3BlcnRpZXMiOnt9LCJmcm9tSWQiOiJuMiIsInRvSWQiOiJuNCJ9LHsiaWQiOiJuNyIsInR5cGUiOiJDT05UQUlOUyIsInN0eWxlIjp7fSwicHJvcGVydGllcyI6e30sImZyb21JZCI6Im4yIiwidG9JZCI6Im43In0seyJpZCI6Im44IiwidHlwZSI6IkNPTlRBSU5TIiwic3R5bGUiOnt9LCJwcm9wZXJ0aWVzIjp7fSwiZnJvbUlkIjoibjciLCJ0b0lkIjoibjQifSx7ImlkIjoibjkiLCJ0eXBlIjoiUkVRVUlSRVMiLCJzdHlsZSI6e30sInByb3BlcnRpZXMiOnt9LCJmcm9tSWQiOiJuNyIsInRvSWQiOiJuNyJ9XX0sImRpYWdyYW1OYW1lIjoiSW1wb3J0ZWQgZnJvbSBodHRwczovL3d3dy5hcGNqb25lcy5jb20vYXJyb3dzLyJ9</a></p>

<h1 id="the-model-implementation">The Model Implementation</h1>

<p>The model consists of nodes and data classes (they <strong>don't</strong> need to be a dataclasses.dataclass)).
Both types of classes need to inherit from DataModelBase, which supplies serialization and deserialization methods.
All model classes must be in the data_model_classes list below.</p>

<h2 id="nodes">Nodes</h2>

<p>Nodes are classes that inherit from StructuredNode. They are stored and queried in the graph database (neo4j).
To store them in the data base, use the .save() method of the object you want to store. To learn more about persistence,
look up the neomodel documentation.
The object graph mapper is neomodel, classes that should represent classes must inherit from neomodel.StructuredNode.
The annotation of class attribute show the datatype, the property type assigned to the attribute describes how the data
type is stored.</p>

<h3 id="adding-nodes">Adding Nodes</h3>

<p>To add a node, create a module with a class that inherits from neomodel.StructuredNode and DataModelBase, then add the class to the data_model_classes list in this module (the module import must happen in the map_model func).
The class attributes are the properties of the node.
The annotation of the class attribute shows the datatype of the property.
The value assigned to that attribute describes how the data type is stored and must be of neomodel.Property.
If the attribute should for example be data class as described below, the data class will be used in the type annotation, while the corresponding Property class will be used as the value assigned to the attribute.</p>

<h2 id="data-classes">Data Classes</h2>

<p>Data classes that won't be explicitly stored as single nodes in the graph but can be stored as properties of nodes.
Every data class also needs a corresponding property class that maps the data class attributes to a neo4j supported data type.
These Property classes should be defined in the same module as the corresponding data class and must inherit from neomodel.Property (and implement the inflate and deflate methods).
The inflate method takes the value stored in the database and returns the data class, the deflate method takes the data class and returns the value that should be stored in the database.</p>

<h3 id="adding-data-classes">Adding Data Classes</h3>

<p>To add a data class, create a module with a class that inherits from DataModelBase and is decorated with dataclasses.dataclass(kw_only=True).
All attributes must have a value assigned to them in the class definition.
In that same module create a class that inherits from neomodel.Property and implement the inflate and deflate methods to inflate/deflate an object from/into a neo4j native type.</p>

<h1 id="json-serialization">JSON Serialization</h1>

<p>Use the to_json method of DataModelBase objects or the CustomJSONEncoder class to serialize the object to json.
Use the from_json method of DataModelBase class or the CustomJSONDecoder class to deserialize the json string to an object.
The CustomJSONDecoder uses duck typing to determine the class of the object (more specifically, it uses the names of the class attributes (except relationships)).</p>

<p>Both serialization and deserialization ignore all relationships.</p>
</div>

                        <input id="mod-model-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-model-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">  1</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">  2</span></a><span class="sd">model graph infrastructure:</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos">  3</span></a><span class="sd">https://arrows.app/#/import/json=eyJncmFwaCI6eyJzdHlsZSI6eyJmb250LWZhbWlseSI6InNhbnMtc2VyaWYiLCJiYWNrZ3JvdW5kLWNvbG9yIjoiI2ZmZmZmZiIsImJhY2tncm91bmQtaW1hZ2UiOiIiLCJiYWNrZ3JvdW5kLXNpemUiOiIxMDAlIiwibm9kZS1jb2xvciI6IiNmZmZmZmYiLCJib3JkZXItd2lkdGgiOjQsImJvcmRlci1jb2xvciI6IiMwMDAwMDAiLCJyYWRpdXMiOjUwLCJub2RlLXBhZGRpbmciOjUsIm5vZGUtbWFyZ2luIjoyLCJvdXRzaWRlLXBvc2l0aW9uIjoiYXV0byIsIm5vZGUtaWNvbi1pbWFnZSI6IiIsIm5vZGUtYmFja2dyb3VuZC1pbWFnZSI6IiIsImljb24tcG9zaXRpb24iOiJpbnNpZGUiLCJpY29uLXNpemUiOjY0LCJjYXB0aW9uLXBvc2l0aW9uIjoiaW5zaWRlIiwiY2FwdGlvbi1tYXgtd2lkdGgiOjIwMCwiY2FwdGlvbi1jb2xvciI6IiMwMDAwMDAiLCJjYXB0aW9uLWZvbnQtc2l6ZSI6NTAsImNhcHRpb24tZm9udC13ZWlnaHQiOiJub3JtYWwiLCJsYWJlbC1wb3NpdGlvbiI6Imluc2lkZSIsImxhYmVsLWRpc3BsYXkiOiJwaWxsIiwibGFiZWwtY29sb3IiOiIjMDAwMDAwIiwibGFiZWwtYmFja2dyb3VuZC1jb2xvciI6IiNmZmZmZmYiLCJsYWJlbC1ib3JkZXItY29sb3IiOiIjMDAwMDAwIiwibGFiZWwtYm9yZGVyLXdpZHRoIjo0LCJsYWJlbC1mb250LXNpemUiOjQwLCJsYWJlbC1wYWRkaW5nIjo1LCJsYWJlbC1tYXJnaW4iOjQsImRpcmVjdGlvbmFsaXR5IjoiZGlyZWN0ZWQiLCJkZXRhaWwtcG9zaXRpb24iOiJpbmxpbmUiLCJkZXRhaWwtb3JpZW50YXRpb24iOiJwYXJhbGxlbCIsImFycm93LXdpZHRoIjo1LCJhcnJvdy1jb2xvciI6IiMwMDAwMDAiLCJtYXJnaW4tc3RhcnQiOjUsIm1hcmdpbi1lbmQiOjUsIm1hcmdpbi1wZWVyIjoyMCwiYXR0YWNobWVudC1zdGFydCI6Im5vcm1hbCIsImF0dGFjaG1lbnQtZW5kIjoibm9ybWFsIiwicmVsYXRpb25zaGlwLWljb24taW1hZ2UiOiIiLCJ0eXBlLWNvbG9yIjoiIzAwMDAwMCIsInR5cGUtYmFja2dyb3VuZC1jb2xvciI6IiNmZmZmZmYiLCJ0eXBlLWJvcmRlci1jb2xvciI6IiMwMDAwMDAiLCJ0eXBlLWJvcmRlci13aWR0aCI6MCwidHlwZS1mb250LXNpemUiOjE2LCJ0eXBlLXBhZGRpbmciOjUsInByb3BlcnR5LXBvc2l0aW9uIjoib3V0c2lkZSIsInByb3BlcnR5LWFsaWdubWVudCI6ImNvbG9uIiwicHJvcGVydHktY29sb3IiOiIjMDAwMDAwIiwicHJvcGVydHktZm9udC1zaXplIjoxNiwicHJvcGVydHktZm9udC13ZWlnaHQiOiJub3JtYWwifSwibm9kZXMiOlt7ImlkIjoibjAiLCJwb3NpdGlvbiI6eyJ4IjotNC4xMjQzMzk0MDIzMjAxMDllLTMyLCJ5IjotMzAuNTYwOTQ5MjEyNTE5MDM0fSwiY2FwdGlvbiI6IiIsImxhYmVscyI6WyJBY3Rpb24iXSwicHJvcGVydGllcyI6eyJpZCI6InN0ciIsImluaXRpYXRvciI6InN0ciIsImZ1bmN0aW9uX2lkZW50aWZpZXIiOiJzdHIiLCJhcmdzIjoiTGlzdFtBbnldIiwia3dfYXJncyI6IkRpY3Rbc3RyLCBBbnldIn0sInN0eWxlIjp7fX0seyJpZCI6Im4xIiwicG9zaXRpb24iOnsieCI6MCwieSI6MzAwfSwiY2FwdGlvbiI6IiIsImxhYmVscyI6WyJBY3Rpb25fcmVzcG9uc2UiXSwicHJvcGVydGllcyI6eyJpZCI6InN0ciIsInN1Y2Nlc3MiOiJib29sIiwicmVzcG9uc2UiOiJzdHIifSwic3R5bGUiOnt9fSx7ImlkIjoibjIiLCJwb3NpdGlvbiI6eyJ4IjozMDAsInkiOi0zMC41NjA5NDkyMTI1MTkwMzR9LCJjYXB0aW9uIjoiIiwibGFiZWxzIjpbIkNvdXJzZSJdLCJwcm9wZXJ0aWVzIjp7ImlkIjoic3RyIiwibmFtZSI6InN0ciIsImRlc2NyaXB0aW9uIjoic3RyIn0sInN0eWxlIjp7fX0seyJpZCI6Im40IiwicG9zaXRpb24iOnsieCI6NjAwLCJ5IjoyMTguNDAxNTU5NzQxNjEzfSwiY2FwdGlvbiI6IiIsImxhYmVscyI6WyJXYXlwb2ludCJdLCJwcm9wZXJ0aWVzIjp7ImlkIjoic3RyIiwibG9jYXRpb24iOiJMb2NhdGlvbiJ9LCJzdHlsZSI6e319LHsiaWQiOiJuNSIsInBvc2l0aW9uIjp7IngiOjQyMSwieSI6NDExfSwiY2FwdGlvbiI6IiIsImxhYmVscyI6WyJWZWhpY2xlIl0sInByb3BlcnRpZXMiOnsiaWQiOiJzdHIiLCJuYW1lIjoic3RyIiwidHVybl9yYWRpdXNfbGVmdCI6ImZsb2F0IiwidHVybl9yYWRpdXNfcmlnaHQiOiJmbG9hdCIsIndoZWVsYmFzZSI6ImZsb2F0IiwiZ3BzX3JlY2VpdmVyX29mZnNldCI6Ikxpc3RbZmxvYXRdIn0sInN0eWxlIjp7fX0seyJpZCI6Im43IiwicG9zaXRpb24iOnsieCI6NjMxLjY1MDE2MjM0NTczMzEsInkiOi0zMC41NjA5NDkyMTI1MTkwMzR9LCJjYXB0aW9uIjoiIiwic3R5bGUiOnt9LCJsYWJlbHMiOlsiUGF0aCJdLCJwcm9wZXJ0aWVzIjp7ImlkIjoic3RyIn19LHsiaWQiOiJuOCIsInBvc2l0aW9uIjp7IngiOjc0NywieSI6NjEyfSwiY2FwdGlvbiI6IiIsInN0eWxlIjp7fSwibGFiZWxzIjpbIlZlaGljbGVTdGF0ZSJdLCJwcm9wZXJ0aWVzIjp7ImlkIjoic3RyIiwic3RlZXJpbmdfYW5nbGUiOiJmbG9hdCIsInNwZWVkIjoiZmxvYXQiLCJwb3NpdGlvbiI6IlBvc2l0aW9uIn19XSwicmVsYXRpb25zaGlwcyI6W3siaWQiOiJuMCIsImZyb21JZCI6Im4wIiwidG9JZCI6Im4xIiwidHlwZSI6InJldHVybnMiLCJwcm9wZXJ0aWVzIjp7fSwic3R5bGUiOnt9fSx7ImlkIjoibjIiLCJ0eXBlIjoiU1VDQ0VTU09SIiwic3R5bGUiOnt9LCJwcm9wZXJ0aWVzIjp7fSwiZnJvbUlkIjoibjQiLCJ0b0lkIjoibjQifSx7ImlkIjoibjYiLCJ0eXBlIjoiQ09OVEFJTlMiLCJzdHlsZSI6e30sInByb3BlcnRpZXMiOnt9LCJmcm9tSWQiOiJuMiIsInRvSWQiOiJuNCJ9LHsiaWQiOiJuNyIsInR5cGUiOiJDT05UQUlOUyIsInN0eWxlIjp7fSwicHJvcGVydGllcyI6e30sImZyb21JZCI6Im4yIiwidG9JZCI6Im43In0seyJpZCI6Im44IiwidHlwZSI6IkNPTlRBSU5TIiwic3R5bGUiOnt9LCJwcm9wZXJ0aWVzIjp7fSwiZnJvbUlkIjoibjciLCJ0b0lkIjoibjQifSx7ImlkIjoibjkiLCJ0eXBlIjoiUkVRVUlSRVMiLCJzdHlsZSI6e30sInByb3BlcnRpZXMiOnt9LCJmcm9tSWQiOiJuNyIsInRvSWQiOiJuNyJ9XX0sImRpYWdyYW1OYW1lIjoiSW1wb3J0ZWQgZnJvbSBodHRwczovL3d3dy5hcGNqb25lcy5jb20vYXJyb3dzLyJ9</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">  4</span></a>
</span><span id="L-5"><a href="#L-5"><span class="linenos">  5</span></a>
</span><span id="L-6"><a href="#L-6"><span class="linenos">  6</span></a><span class="sd"># The Model Implementation</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos">  7</span></a>
</span><span id="L-8"><a href="#L-8"><span class="linenos">  8</span></a><span class="sd">The model consists of nodes and data classes (they **don&#39;t** need to be a dataclasses.dataclass)).</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos">  9</span></a><span class="sd">Both types of classes need to inherit from DataModelBase, which supplies serialization and deserialization methods.</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos"> 10</span></a><span class="sd">All model classes must be in the data_model_classes list below.</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos"> 11</span></a>
</span><span id="L-12"><a href="#L-12"><span class="linenos"> 12</span></a><span class="sd">## Nodes</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos"> 13</span></a>
</span><span id="L-14"><a href="#L-14"><span class="linenos"> 14</span></a><span class="sd">Nodes are classes that inherit from StructuredNode. They are stored and queried in the graph database (neo4j).</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos"> 15</span></a><span class="sd">To store them in the data base, use the .save() method of the object you want to store. To learn more about persistence,</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos"> 16</span></a><span class="sd">look up the neomodel documentation.</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos"> 17</span></a><span class="sd">The object graph mapper is neomodel, classes that should represent classes must inherit from neomodel.StructuredNode.</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos"> 18</span></a><span class="sd">The annotation of class attribute show the datatype, the property type assigned to the attribute describes how the data</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos"> 19</span></a><span class="sd">type is stored.</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos"> 20</span></a><span class="sd">### Adding Nodes</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos"> 21</span></a><span class="sd">To add a node, create a module with a class that inherits from neomodel.StructuredNode and DataModelBase, then add the class to the data_model_classes list in this module (the module import must happen in the map_model func).</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos"> 22</span></a><span class="sd">The class attributes are the properties of the node.</span>
</span><span id="L-23"><a href="#L-23"><span class="linenos"> 23</span></a><span class="sd">The annotation of the class attribute shows the datatype of the property.</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos"> 24</span></a><span class="sd">The value assigned to that attribute describes how the data type is stored and must be of neomodel.Property.</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos"> 25</span></a><span class="sd">If the attribute should for example be data class as described below, the data class will be used in the type annotation, while the corresponding Property class will be used as the value assigned to the attribute.</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos"> 26</span></a>
</span><span id="L-27"><a href="#L-27"><span class="linenos"> 27</span></a><span class="sd">## Data Classes</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos"> 28</span></a><span class="sd">Data classes that won&#39;t be explicitly stored as single nodes in the graph but can be stored as properties of nodes.</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos"> 29</span></a><span class="sd">Every data class also needs a corresponding property class that maps the data class attributes to a neo4j supported data type.</span>
</span><span id="L-30"><a href="#L-30"><span class="linenos"> 30</span></a><span class="sd">These Property classes should be defined in the same module as the corresponding data class and must inherit from neomodel.Property (and implement the inflate and deflate methods).</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos"> 31</span></a><span class="sd">The inflate method takes the value stored in the database and returns the data class, the deflate method takes the data class and returns the value that should be stored in the database.</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos"> 32</span></a>
</span><span id="L-33"><a href="#L-33"><span class="linenos"> 33</span></a><span class="sd">### Adding Data Classes</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos"> 34</span></a><span class="sd">To add a data class, create a module with a class that inherits from DataModelBase and is decorated with dataclasses.dataclass(kw_only=True).</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos"> 35</span></a><span class="sd">All attributes must have a value assigned to them in the class definition.</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos"> 36</span></a><span class="sd">In that same module create a class that inherits from neomodel.Property and implement the inflate and deflate methods to inflate/deflate an object from/into a neo4j native type.</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos"> 37</span></a>
</span><span id="L-38"><a href="#L-38"><span class="linenos"> 38</span></a>
</span><span id="L-39"><a href="#L-39"><span class="linenos"> 39</span></a><span class="sd"># JSON Serialization</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos"> 40</span></a><span class="sd">Use the to_json method of DataModelBase objects or the CustomJSONEncoder class to serialize the object to json.</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos"> 41</span></a><span class="sd">Use the from_json method of DataModelBase class or the CustomJSONDecoder class to deserialize the json string to an object.</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos"> 42</span></a><span class="sd">The CustomJSONDecoder uses duck typing to determine the class of the object (more specifically, it uses the names of the class attributes (except relationships)).</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos"> 43</span></a>
</span><span id="L-44"><a href="#L-44"><span class="linenos"> 44</span></a><span class="sd">Both serialization and deserialization ignore all relationships.</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos"> 45</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos"> 46</span></a><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">annotations</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos"> 47</span></a>
</span><span id="L-48"><a href="#L-48"><span class="linenos"> 48</span></a><span class="kn">import</span> <span class="nn">json</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos"> 49</span></a><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">wraps</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos"> 50</span></a><span class="kn">from</span> <span class="nn">types</span> <span class="kn">import</span> <span class="n">FunctionType</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos"> 51</span></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Callable</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos"> 52</span></a>
</span><span id="L-53"><a href="#L-53"><span class="linenos"> 53</span></a><span class="kn">import</span> <span class="nn">neomodel</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos"> 54</span></a><span class="kn">from</span> <span class="nn">neomodel</span> <span class="kn">import</span> <span class="p">(</span>
</span><span id="L-55"><a href="#L-55"><span class="linenos"> 55</span></a>	<span class="n">StructuredNode</span><span class="p">,</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos"> 56</span></a>	<span class="n">RelationshipDefinition</span><span class="p">,</span>
</span><span id="L-57"><a href="#L-57"><span class="linenos"> 57</span></a>	<span class="n">RelationshipManager</span><span class="p">,</span>
</span><span id="L-58"><a href="#L-58"><span class="linenos"> 58</span></a>	<span class="n">RelationshipTo</span><span class="p">,</span>
</span><span id="L-59"><a href="#L-59"><span class="linenos"> 59</span></a>	<span class="n">RelationshipFrom</span><span class="p">,</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos"> 60</span></a><span class="p">)</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos"> 61</span></a><span class="kn">from</span> <span class="nn">neomodel.properties</span> <span class="kn">import</span> <span class="n">validator</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos"> 62</span></a><span class="kn">from</span> <span class="nn">pyquaternion</span> <span class="kn">import</span> <span class="n">Quaternion</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos"> 63</span></a>
</span><span id="L-64"><a href="#L-64"><span class="linenos"> 64</span></a><span class="kn">from</span> <span class="nn">open_precision.utils.other</span> <span class="kn">import</span> <span class="n">get_attributes</span><span class="p">,</span> <span class="n">is_iterable</span>
</span><span id="L-65"><a href="#L-65"><span class="linenos"> 65</span></a>
</span><span id="L-66"><a href="#L-66"><span class="linenos"> 66</span></a><span class="n">signature_class_mapping</span><span class="p">:</span> <span class="nb">dict</span>  <span class="c1"># will be set by map_model func</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos"> 67</span></a><span class="n">class_signature_mapping</span><span class="p">:</span> <span class="nb">dict</span>  <span class="c1"># will be set by map_model func</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos"> 68</span></a>
</span><span id="L-69"><a href="#L-69"><span class="linenos"> 69</span></a>
</span><span id="L-70"><a href="#L-70"><span class="linenos"> 70</span></a><span class="k">def</span> <span class="nf">persist_return</span><span class="p">(</span><span class="n">func</span><span class="p">:</span> <span class="nb">callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">callable</span><span class="p">:</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos"> 71</span></a><span class="w">	</span><span class="sd">&quot;&quot;&quot;this decorator will persist the return value of the decorated func when it is called&quot;&quot;&quot;</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos"> 72</span></a>
</span><span id="L-73"><a href="#L-73"><span class="linenos"> 73</span></a>	<span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos"> 74</span></a>	<span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos"> 75</span></a>		<span class="n">val</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos"> 76</span></a>		<span class="k">if</span> <span class="n">is_iterable</span><span class="p">(</span><span class="n">val</span><span class="p">):</span>
</span><span id="L-77"><a href="#L-77"><span class="linenos"> 77</span></a>			<span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">save</span><span class="p">()</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">val</span><span class="p">]</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos"> 78</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="L-79"><a href="#L-79"><span class="linenos"> 79</span></a>			<span class="n">val</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="L-80"><a href="#L-80"><span class="linenos"> 80</span></a>		<span class="k">return</span> <span class="n">val</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos"> 81</span></a>
</span><span id="L-82"><a href="#L-82"><span class="linenos"> 82</span></a>	<span class="k">return</span> <span class="n">wrapper</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos"> 83</span></a>
</span><span id="L-84"><a href="#L-84"><span class="linenos"> 84</span></a>
</span><span id="L-85"><a href="#L-85"><span class="linenos"> 85</span></a><span class="k">def</span> <span class="nf">persist_arg</span><span class="p">(</span><span class="n">func</span><span class="p">:</span> <span class="nb">callable</span><span class="p">,</span> <span class="n">position_or_kw</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">callable</span><span class="p">:</span>
</span><span id="L-86"><a href="#L-86"><span class="linenos"> 86</span></a><span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-87"><a href="#L-87"><span class="linenos"> 87</span></a><span class="sd">	this decorator will persist the argument of the decorated func when it is called</span>
</span><span id="L-88"><a href="#L-88"><span class="linenos"> 88</span></a><span class="sd">	:param func: the func to decorate</span>
</span><span id="L-89"><a href="#L-89"><span class="linenos"> 89</span></a><span class="sd">	:param position_or_kw: the position or keyword of the argument to persist, defaults to 0</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos"> 90</span></a><span class="sd">	&quot;&quot;&quot;</span>
</span><span id="L-91"><a href="#L-91"><span class="linenos"> 91</span></a>
</span><span id="L-92"><a href="#L-92"><span class="linenos"> 92</span></a>	<span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos"> 93</span></a>	<span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos"> 94</span></a>		<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">position_or_kw</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="L-95"><a href="#L-95"><span class="linenos"> 95</span></a>			<span class="n">val</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">position_or_kw</span><span class="p">]</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos"> 96</span></a>		<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">position_or_kw</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
</span><span id="L-97"><a href="#L-97"><span class="linenos"> 97</span></a>			<span class="n">val</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos"> 98</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos"> 99</span></a>			<span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;position_or_kw must be either an int or a str&quot;</span><span class="p">)</span>
</span><span id="L-100"><a href="#L-100"><span class="linenos">100</span></a>
</span><span id="L-101"><a href="#L-101"><span class="linenos">101</span></a>		<span class="k">if</span> <span class="n">is_iterable</span><span class="p">(</span><span class="n">val</span><span class="p">):</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos">102</span></a>			<span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">save</span><span class="p">()</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">val</span><span class="p">]</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos">103</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="L-104"><a href="#L-104"><span class="linenos">104</span></a>			<span class="n">val</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos">105</span></a>		<span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos">106</span></a>
</span><span id="L-107"><a href="#L-107"><span class="linenos">107</span></a>	<span class="k">return</span> <span class="n">wrapper</span>
</span><span id="L-108"><a href="#L-108"><span class="linenos">108</span></a>
</span><span id="L-109"><a href="#L-109"><span class="linenos">109</span></a>
</span><span id="L-110"><a href="#L-110"><span class="linenos">110</span></a><span class="k">def</span> <span class="nf">_resolve_object_conns</span><span class="p">(</span>
</span><span id="L-111"><a href="#L-111"><span class="linenos">111</span></a>	<span class="n">obj</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
</span><span id="L-112"><a href="#L-112"><span class="linenos">112</span></a>	<span class="n">with_conns</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">RelationshipDefinition</span><span class="p">],</span>
</span><span id="L-113"><a href="#L-113"><span class="linenos">113</span></a>	<span class="n">resolved_objects</span><span class="p">:</span> <span class="n">List</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos">114</span></a>	<span class="n">main_obj</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-115"><a href="#L-115"><span class="linenos">115</span></a><span class="p">):</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos">116</span></a>	<span class="n">connections</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-117"><a href="#L-117"><span class="linenos">117</span></a>	<span class="n">objects</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-118"><a href="#L-118"><span class="linenos">118</span></a>	<span class="n">resolved_objects</span> <span class="o">=</span> <span class="n">resolved_objects</span> <span class="k">if</span> <span class="n">resolved_objects</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">[]</span>
</span><span id="L-119"><a href="#L-119"><span class="linenos">119</span></a>
</span><span id="L-120"><a href="#L-120"><span class="linenos">120</span></a>	<span class="k">if</span> <span class="n">main_obj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># only the case on the first recursion level</span>
</span><span id="L-121"><a href="#L-121"><span class="linenos">121</span></a>		<span class="n">main_obj</span> <span class="o">=</span> <span class="n">obj</span>
</span><span id="L-122"><a href="#L-122"><span class="linenos">122</span></a>		<span class="n">objects</span><span class="p">[</span><span class="s2">&quot;main&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">main_obj</span>
</span><span id="L-123"><a href="#L-123"><span class="linenos">123</span></a>	<span class="k">else</span><span class="p">:</span>
</span><span id="L-124"><a href="#L-124"><span class="linenos">124</span></a>		<span class="n">objects</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span><span class="o">.</span><span class="vm">__qualname__</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">uuid</span><span class="p">)]</span> <span class="o">=</span> <span class="n">obj</span>
</span><span id="L-125"><a href="#L-125"><span class="linenos">125</span></a>
</span><span id="L-126"><a href="#L-126"><span class="linenos">126</span></a>	<span class="k">for</span> <span class="n">field</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-127"><a href="#L-127"><span class="linenos">127</span></a>		<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">RelationshipManager</span><span class="p">)</span> <span class="ow">and</span> <span class="n">value</span><span class="o">.</span><span class="n">definition</span> <span class="ow">in</span> <span class="n">with_conns</span><span class="p">:</span>
</span><span id="L-128"><a href="#L-128"><span class="linenos">128</span></a>			<span class="n">relationship</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">field</span><span class="p">)</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos">129</span></a>
</span><span id="L-130"><a href="#L-130"><span class="linenos">130</span></a>			<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">relationship</span><span class="p">,</span> <span class="n">RelationshipTo</span><span class="p">):</span>
</span><span id="L-131"><a href="#L-131"><span class="linenos">131</span></a>				<span class="n">rel_type</span> <span class="o">=</span> <span class="s2">&quot;to&quot;</span>
</span><span id="L-132"><a href="#L-132"><span class="linenos">132</span></a>			<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">relationship</span><span class="p">,</span> <span class="n">RelationshipFrom</span><span class="p">):</span>
</span><span id="L-133"><a href="#L-133"><span class="linenos">133</span></a>				<span class="n">rel_type</span> <span class="o">=</span> <span class="s2">&quot;from&quot;</span>
</span><span id="L-134"><a href="#L-134"><span class="linenos">134</span></a>			<span class="k">else</span><span class="p">:</span>
</span><span id="L-135"><a href="#L-135"><span class="linenos">135</span></a>				<span class="n">rel_type</span> <span class="o">=</span> <span class="s2">&quot;undirected&quot;</span>
</span><span id="L-136"><a href="#L-136"><span class="linenos">136</span></a>
</span><span id="L-137"><a href="#L-137"><span class="linenos">137</span></a>			<span class="c1"># iterate over all connected objects and resolve their connections (recursion)</span>
</span><span id="L-138"><a href="#L-138"><span class="linenos">138</span></a>			<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
</span><span id="L-139"><a href="#L-139"><span class="linenos">139</span></a>				<span class="n">obj_a_ref</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos">140</span></a>					<span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span><span class="o">.</span><span class="vm">__qualname__</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">uuid</span><span class="p">)</span>
</span><span id="L-141"><a href="#L-141"><span class="linenos">141</span></a>					<span class="k">if</span> <span class="n">obj</span> <span class="o">!=</span> <span class="n">main_obj</span>
</span><span id="L-142"><a href="#L-142"><span class="linenos">142</span></a>					<span class="k">else</span> <span class="s2">&quot;main&quot;</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos">143</span></a>				<span class="p">)</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos">144</span></a>				<span class="n">obj_b_ref</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-145"><a href="#L-145"><span class="linenos">145</span></a>					<span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="vm">__qualname__</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">uuid</span><span class="p">)</span>
</span><span id="L-146"><a href="#L-146"><span class="linenos">146</span></a>					<span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">main_obj</span>
</span><span id="L-147"><a href="#L-147"><span class="linenos">147</span></a>					<span class="k">else</span> <span class="s2">&quot;main&quot;</span>
</span><span id="L-148"><a href="#L-148"><span class="linenos">148</span></a>				<span class="p">)</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos">149</span></a>				<span class="n">connections</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="L-150"><a href="#L-150"><span class="linenos">150</span></a>					<span class="p">{</span>
</span><span id="L-151"><a href="#L-151"><span class="linenos">151</span></a>						<span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="n">obj_a_ref</span><span class="p">,</span>
</span><span id="L-152"><a href="#L-152"><span class="linenos">152</span></a>						<span class="s2">&quot;relationship&quot;</span><span class="p">:</span> <span class="n">field</span><span class="p">,</span>
</span><span id="L-153"><a href="#L-153"><span class="linenos">153</span></a>						<span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">rel_type</span><span class="p">,</span>
</span><span id="L-154"><a href="#L-154"><span class="linenos">154</span></a>						<span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="n">obj_b_ref</span><span class="p">,</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos">155</span></a>					<span class="p">}</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos">156</span></a>				<span class="p">)</span>
</span><span id="L-157"><a href="#L-157"><span class="linenos">157</span></a>
</span><span id="L-158"><a href="#L-158"><span class="linenos">158</span></a>				<span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">resolved_objects</span><span class="p">:</span>  <span class="c1"># prevent infinite recursion</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos">159</span></a>					<span class="k">continue</span>
</span><span id="L-160"><a href="#L-160"><span class="linenos">160</span></a>				<span class="n">resolved_objects</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span><span id="L-161"><a href="#L-161"><span class="linenos">161</span></a>
</span><span id="L-162"><a href="#L-162"><span class="linenos">162</span></a>				<span class="n">inner_objs</span><span class="p">,</span> <span class="n">inner_conns</span> <span class="o">=</span> <span class="n">_resolve_object_conns</span><span class="p">(</span>
</span><span id="L-163"><a href="#L-163"><span class="linenos">163</span></a>					<span class="n">x</span><span class="p">,</span>
</span><span id="L-164"><a href="#L-164"><span class="linenos">164</span></a>					<span class="n">with_conns</span><span class="o">=</span><span class="n">with_conns</span><span class="p">,</span>
</span><span id="L-165"><a href="#L-165"><span class="linenos">165</span></a>					<span class="n">resolved_objects</span><span class="o">=</span><span class="n">resolved_objects</span><span class="p">,</span>
</span><span id="L-166"><a href="#L-166"><span class="linenos">166</span></a>					<span class="n">main_obj</span><span class="o">=</span><span class="n">main_obj</span><span class="p">,</span>
</span><span id="L-167"><a href="#L-167"><span class="linenos">167</span></a>				<span class="p">)</span>
</span><span id="L-168"><a href="#L-168"><span class="linenos">168</span></a>				<span class="n">objects</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">inner_objs</span><span class="p">)</span>
</span><span id="L-169"><a href="#L-169"><span class="linenos">169</span></a>				<span class="n">connections</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">inner_conns</span><span class="p">)</span>
</span><span id="L-170"><a href="#L-170"><span class="linenos">170</span></a>
</span><span id="L-171"><a href="#L-171"><span class="linenos">171</span></a>	<span class="k">return</span> <span class="n">objects</span><span class="p">,</span> <span class="n">connections</span>
</span><span id="L-172"><a href="#L-172"><span class="linenos">172</span></a>
</span><span id="L-173"><a href="#L-173"><span class="linenos">173</span></a>
</span><span id="L-174"><a href="#L-174"><span class="linenos">174</span></a><span class="k">class</span> <span class="nc">DataModelBase</span><span class="p">:</span>
</span><span id="L-175"><a href="#L-175"><span class="linenos">175</span></a>	<span class="k">def</span> <span class="nf">to_json</span><span class="p">(</span>
</span><span id="L-176"><a href="#L-176"><span class="linenos">176</span></a>		<span class="bp">self</span><span class="p">,</span>
</span><span id="L-177"><a href="#L-177"><span class="linenos">177</span></a>		<span class="n">with_rels</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">RelationshipDefinition</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-178"><a href="#L-178"><span class="linenos">178</span></a>		<span class="n">field_key_filter</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-179"><a href="#L-179"><span class="linenos">179</span></a>		<span class="n">field_type_filter</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-180"><a href="#L-180"><span class="linenos">180</span></a>	<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-181"><a href="#L-181"><span class="linenos">181</span></a>		<span class="n">encoder</span> <span class="o">=</span> <span class="n">CustomJSONEncoder</span><span class="p">(</span>
</span><span id="L-182"><a href="#L-182"><span class="linenos">182</span></a>			<span class="n">field_type_filter</span><span class="o">=</span><span class="n">field_type_filter</span><span class="p">,</span> <span class="n">field_key_filter</span><span class="o">=</span><span class="n">field_key_filter</span>
</span><span id="L-183"><a href="#L-183"><span class="linenos">183</span></a>		<span class="p">)</span>
</span><span id="L-184"><a href="#L-184"><span class="linenos">184</span></a>		<span class="k">if</span> <span class="n">with_rels</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-185"><a href="#L-185"><span class="linenos">185</span></a>			<span class="k">return</span> <span class="n">encoder</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-186"><a href="#L-186"><span class="linenos">186</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="L-187"><a href="#L-187"><span class="linenos">187</span></a>			<span class="n">objects</span><span class="p">,</span> <span class="n">connections</span> <span class="o">=</span> <span class="n">_resolve_object_conns</span><span class="p">(</span>
</span><span id="L-188"><a href="#L-188"><span class="linenos">188</span></a>				<span class="bp">self</span><span class="p">,</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">definition</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">with_rels</span><span class="p">]</span>
</span><span id="L-189"><a href="#L-189"><span class="linenos">189</span></a>			<span class="p">)</span>
</span><span id="L-190"><a href="#L-190"><span class="linenos">190</span></a>			<span class="n">composite_object_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;objects&quot;</span><span class="p">:</span> <span class="n">objects</span><span class="p">,</span> <span class="s2">&quot;connections&quot;</span><span class="p">:</span> <span class="n">connections</span><span class="p">}</span>
</span><span id="L-191"><a href="#L-191"><span class="linenos">191</span></a>			<span class="k">return</span> <span class="n">encoder</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">composite_object_dict</span><span class="p">)</span>
</span><span id="L-192"><a href="#L-192"><span class="linenos">192</span></a>
</span><span id="L-193"><a href="#L-193"><span class="linenos">193</span></a>	<span class="nd">@classmethod</span>
</span><span id="L-194"><a href="#L-194"><span class="linenos">194</span></a>	<span class="k">def</span> <span class="nf">from_json</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">json_string</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">with_conns</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos">195</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-196"><a href="#L-196"><span class="linenos">196</span></a><span class="sd">		Deserializes a json string to an object of the class. If the json string is a composite object (i.e. it contains</span>
</span><span id="L-197"><a href="#L-197"><span class="linenos">197</span></a><span class="sd">		connections), the main object is returned.</span>
</span><span id="L-198"><a href="#L-198"><span class="linenos">198</span></a><span class="sd">		If an object with the same uuid already exists in the database, it will be updated to have the properties of the</span>
</span><span id="L-199"><a href="#L-199"><span class="linenos">199</span></a><span class="sd">		serialized object and returned instead of a new object.</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos">200</span></a>
</span><span id="L-201"><a href="#L-201"><span class="linenos">201</span></a><span class="sd">		:param json_string:</span>
</span><span id="L-202"><a href="#L-202"><span class="linenos">202</span></a><span class="sd">		:param with_conns:</span>
</span><span id="L-203"><a href="#L-203"><span class="linenos">203</span></a><span class="sd">		:return:</span>
</span><span id="L-204"><a href="#L-204"><span class="linenos">204</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="L-205"><a href="#L-205"><span class="linenos">205</span></a>		<span class="n">obj_dict</span> <span class="o">=</span> <span class="n">CustomJSONDecoder</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">json_string</span><span class="p">)</span>
</span><span id="L-206"><a href="#L-206"><span class="linenos">206</span></a>		<span class="k">if</span> <span class="n">obj_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span><span class="s2">&quot;objects&quot;</span><span class="p">,</span> <span class="s2">&quot;connections&quot;</span><span class="p">}:</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos">207</span></a>			<span class="k">if</span> <span class="n">with_conns</span><span class="p">:</span>
</span><span id="L-208"><a href="#L-208"><span class="linenos">208</span></a>				<span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">obj_dict</span><span class="p">[</span><span class="s2">&quot;objects&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
</span><span id="L-209"><a href="#L-209"><span class="linenos">209</span></a>					<span class="n">obj</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="L-210"><a href="#L-210"><span class="linenos">210</span></a>				<span class="k">for</span> <span class="n">conn</span> <span class="ow">in</span> <span class="n">obj_dict</span><span class="p">[</span><span class="s2">&quot;connections&quot;</span><span class="p">]:</span>
</span><span id="L-211"><a href="#L-211"><span class="linenos">211</span></a>					<span class="n">obj_a</span> <span class="o">=</span> <span class="n">obj_dict</span><span class="p">[</span><span class="s2">&quot;objects&quot;</span><span class="p">][</span><span class="n">conn</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">]]</span>
</span><span id="L-212"><a href="#L-212"><span class="linenos">212</span></a>					<span class="n">obj_b</span> <span class="o">=</span> <span class="n">obj_dict</span><span class="p">[</span><span class="s2">&quot;objects&quot;</span><span class="p">][</span><span class="n">conn</span><span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">]]</span>
</span><span id="L-213"><a href="#L-213"><span class="linenos">213</span></a>					<span class="nb">getattr</span><span class="p">(</span><span class="n">obj_a</span><span class="p">,</span> <span class="n">conn</span><span class="p">[</span><span class="s2">&quot;relationship&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">obj_b</span><span class="p">)</span>
</span><span id="L-214"><a href="#L-214"><span class="linenos">214</span></a>			<span class="k">return</span> <span class="n">obj_dict</span><span class="p">[</span><span class="s2">&quot;objects&quot;</span><span class="p">][</span><span class="s2">&quot;main&quot;</span><span class="p">]</span>
</span><span id="L-215"><a href="#L-215"><span class="linenos">215</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="L-216"><a href="#L-216"><span class="linenos">216</span></a>			<span class="k">return</span> <span class="n">obj_dict</span>
</span><span id="L-217"><a href="#L-217"><span class="linenos">217</span></a>
</span><span id="L-218"><a href="#L-218"><span class="linenos">218</span></a>
</span><span id="L-219"><a href="#L-219"><span class="linenos">219</span></a><span class="c1"># extend the json.JSONEncoder class</span>
</span><span id="L-220"><a href="#L-220"><span class="linenos">220</span></a><span class="k">class</span> <span class="nc">CustomJSONEncoder</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">JSONEncoder</span><span class="p">):</span>
</span><span id="L-221"><a href="#L-221"><span class="linenos">221</span></a>	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
</span><span id="L-222"><a href="#L-222"><span class="linenos">222</span></a>		<span class="bp">self</span><span class="p">,</span>
</span><span id="L-223"><a href="#L-223"><span class="linenos">223</span></a>		<span class="o">*</span><span class="n">args</span><span class="p">,</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos">224</span></a>		<span class="n">field_key_filter</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-225"><a href="#L-225"><span class="linenos">225</span></a>		<span class="n">field_type_filter</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-226"><a href="#L-226"><span class="linenos">226</span></a>		<span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
</span><span id="L-227"><a href="#L-227"><span class="linenos">227</span></a>	<span class="p">):</span>
</span><span id="L-228"><a href="#L-228"><span class="linenos">228</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">field_key_filter</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-229"><a href="#L-229"><span class="linenos">229</span></a>			<span class="n">field_key_filter</span> <span class="k">if</span> <span class="n">field_key_filter</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="kc">True</span>
</span><span id="L-230"><a href="#L-230"><span class="linenos">230</span></a>		<span class="p">)</span>
</span><span id="L-231"><a href="#L-231"><span class="linenos">231</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">field_type_filter</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-232"><a href="#L-232"><span class="linenos">232</span></a>			<span class="n">field_type_filter</span> <span class="k">if</span> <span class="n">field_type_filter</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="kc">True</span>
</span><span id="L-233"><a href="#L-233"><span class="linenos">233</span></a>		<span class="p">)</span>
</span><span id="L-234"><a href="#L-234"><span class="linenos">234</span></a>		<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="L-235"><a href="#L-235"><span class="linenos">235</span></a>
</span><span id="L-236"><a href="#L-236"><span class="linenos">236</span></a>	<span class="c1"># overload method default</span>
</span><span id="L-237"><a href="#L-237"><span class="linenos">237</span></a>	<span class="k">def</span> <span class="nf">default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
</span><span id="L-238"><a href="#L-238"><span class="linenos">238</span></a>		<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">DataModelBase</span><span class="p">):</span>
</span><span id="L-239"><a href="#L-239"><span class="linenos">239</span></a>			<span class="n">ret</span> <span class="o">=</span> <span class="p">{</span><span class="n">x</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">class_signature_mapping</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="vm">__class__</span><span class="p">]}</span>
</span><span id="L-240"><a href="#L-240"><span class="linenos">240</span></a>			<span class="n">ret</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-241"><a href="#L-241"><span class="linenos">241</span></a>				<span class="n">k</span><span class="p">:</span> <span class="n">v</span>
</span><span id="L-242"><a href="#L-242"><span class="linenos">242</span></a>				<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">ret</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
</span><span id="L-243"><a href="#L-243"><span class="linenos">243</span></a>				<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_key_filter</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_type_filter</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
</span><span id="L-244"><a href="#L-244"><span class="linenos">244</span></a>			<span class="p">}</span>
</span><span id="L-245"><a href="#L-245"><span class="linenos">245</span></a>			<span class="k">return</span> <span class="n">ret</span>
</span><span id="L-246"><a href="#L-246"><span class="linenos">246</span></a>		<span class="k">elif</span> <span class="n">obj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-247"><a href="#L-247"><span class="linenos">247</span></a>			<span class="k">return</span> <span class="s2">&quot;null&quot;</span>
</span><span id="L-248"><a href="#L-248"><span class="linenos">248</span></a>		<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">Quaternion</span><span class="p">):</span>
</span><span id="L-249"><a href="#L-249"><span class="linenos">249</span></a>			<span class="k">return</span> <span class="p">{</span><span class="s2">&quot;q&quot;</span><span class="p">:</span> <span class="n">obj</span><span class="o">.</span><span class="n">q</span><span class="o">.</span><span class="n">tolist</span><span class="p">()}</span>
</span><span id="L-250"><a href="#L-250"><span class="linenos">250</span></a>		<span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">JSONEncoder</span><span class="o">.</span><span class="n">default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>
</span><span id="L-251"><a href="#L-251"><span class="linenos">251</span></a>
</span><span id="L-252"><a href="#L-252"><span class="linenos">252</span></a>
</span><span id="L-253"><a href="#L-253"><span class="linenos">253</span></a><span class="k">class</span> <span class="nc">CustomJSONDecoder</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">JSONDecoder</span><span class="p">):</span>
</span><span id="L-254"><a href="#L-254"><span class="linenos">254</span></a><span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-255"><a href="#L-255"><span class="linenos">255</span></a><span class="sd">	JSON decoder that is able to reconstruct subclasses of DataModelBase from JSON by matching keys with class attribute</span>
</span><span id="L-256"><a href="#L-256"><span class="linenos">256</span></a><span class="sd">	names. Relationship fields will be ignored.</span>
</span><span id="L-257"><a href="#L-257"><span class="linenos">257</span></a><span class="sd">	&quot;&quot;&quot;</span>
</span><span id="L-258"><a href="#L-258"><span class="linenos">258</span></a>
</span><span id="L-259"><a href="#L-259"><span class="linenos">259</span></a>	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="L-260"><a href="#L-260"><span class="linenos">260</span></a>		<span class="n">json</span><span class="o">.</span><span class="n">JSONDecoder</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_hook</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">object_hook</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="L-261"><a href="#L-261"><span class="linenos">261</span></a>
</span><span id="L-262"><a href="#L-262"><span class="linenos">262</span></a>	<span class="k">def</span> <span class="nf">object_hook</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos">263</span></a>		<span class="c1"># handling the resolution of nested objects</span>
</span><span id="L-264"><a href="#L-264"><span class="linenos">264</span></a>		<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="L-265"><a href="#L-265"><span class="linenos">265</span></a>			<span class="n">keys_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos">266</span></a>
</span><span id="L-267"><a href="#L-267"><span class="linenos">267</span></a>			<span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys_set</span><span class="p">:</span>
</span><span id="L-268"><a href="#L-268"><span class="linenos">268</span></a>				<span class="n">obj</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">object_hook</span><span class="p">(</span><span class="n">obj</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
</span><span id="L-269"><a href="#L-269"><span class="linenos">269</span></a>
</span><span id="L-270"><a href="#L-270"><span class="linenos">270</span></a>			<span class="c1"># check for quaternion</span>
</span><span id="L-271"><a href="#L-271"><span class="linenos">271</span></a>			<span class="k">if</span> <span class="n">keys_set</span> <span class="o">==</span> <span class="p">{</span><span class="s2">&quot;q&quot;</span><span class="p">}:</span>
</span><span id="L-272"><a href="#L-272"><span class="linenos">272</span></a>				<span class="k">return</span> <span class="n">Quaternion</span><span class="p">(</span><span class="n">obj</span><span class="p">[</span><span class="s2">&quot;q&quot;</span><span class="p">])</span>
</span><span id="L-273"><a href="#L-273"><span class="linenos">273</span></a>
</span><span id="L-274"><a href="#L-274"><span class="linenos">274</span></a>			<span class="c1"># check if the dict is a signature of a class</span>
</span><span id="L-275"><a href="#L-275"><span class="linenos">275</span></a>			<span class="k">for</span> <span class="n">signature</span><span class="p">,</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="n">signature_class_mapping</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-276"><a href="#L-276"><span class="linenos">276</span></a>				<span class="k">if</span> <span class="n">signature</span> <span class="o">==</span> <span class="n">keys_set</span><span class="p">:</span>
</span><span id="L-277"><a href="#L-277"><span class="linenos">277</span></a>					<span class="k">if</span> <span class="s2">&quot;uuid&quot;</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-278"><a href="#L-278"><span class="linenos">278</span></a>						<span class="n">ret</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">get_or_none</span><span class="p">(</span><span class="n">uuid</span><span class="o">=</span><span class="n">obj</span><span class="p">[</span><span class="s2">&quot;uuid&quot;</span><span class="p">])</span>
</span><span id="L-279"><a href="#L-279"><span class="linenos">279</span></a>						<span class="k">if</span> <span class="n">ret</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-280"><a href="#L-280"><span class="linenos">280</span></a>							<span class="c1"># update the object with the new values</span>
</span><span id="L-281"><a href="#L-281"><span class="linenos">281</span></a>							<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-282"><a href="#L-282"><span class="linenos">282</span></a>								<span class="nb">setattr</span><span class="p">(</span><span class="n">ret</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="L-283"><a href="#L-283"><span class="linenos">283</span></a>							<span class="n">ret</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="L-284"><a href="#L-284"><span class="linenos">284</span></a>
</span><span id="L-285"><a href="#L-285"><span class="linenos">285</span></a>							<span class="k">return</span> <span class="n">ret</span>
</span><span id="L-286"><a href="#L-286"><span class="linenos">286</span></a><span class="w">					</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-287"><a href="#L-287"><span class="linenos">287</span></a><span class="sd">                    # remove relation information from dict</span>
</span><span id="L-288"><a href="#L-288"><span class="linenos">288</span></a><span class="sd">                    obj = {k: v for k, v in obj.items() if</span>
</span><span id="L-289"><a href="#L-289"><span class="linenos">289</span></a><span class="sd">                           not issubclass(type(getattr(cls, k)), RelationshipDefinition)}</span>
</span><span id="L-290"><a href="#L-290"><span class="linenos">290</span></a><span class="sd">                    &quot;&quot;&quot;</span>
</span><span id="L-291"><a href="#L-291"><span class="linenos">291</span></a>					<span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="o">**</span><span class="n">obj</span><span class="p">)</span>
</span><span id="L-292"><a href="#L-292"><span class="linenos">292</span></a>			<span class="k">else</span><span class="p">:</span>
</span><span id="L-293"><a href="#L-293"><span class="linenos">293</span></a>				<span class="k">return</span> <span class="n">obj</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos">294</span></a>
</span><span id="L-295"><a href="#L-295"><span class="linenos">295</span></a>		<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="L-296"><a href="#L-296"><span class="linenos">296</span></a>			<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">obj</span><span class="p">)):</span>
</span><span id="L-297"><a href="#L-297"><span class="linenos">297</span></a>				<span class="n">obj</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">object_hook</span><span class="p">(</span><span class="n">obj</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</span><span id="L-298"><a href="#L-298"><span class="linenos">298</span></a>
</span><span id="L-299"><a href="#L-299"><span class="linenos">299</span></a>			<span class="k">return</span> <span class="n">obj</span>
</span><span id="L-300"><a href="#L-300"><span class="linenos">300</span></a>
</span><span id="L-301"><a href="#L-301"><span class="linenos">301</span></a>		<span class="k">return</span> <span class="n">obj</span>
</span><span id="L-302"><a href="#L-302"><span class="linenos">302</span></a>
</span><span id="L-303"><a href="#L-303"><span class="linenos">303</span></a>
</span><span id="L-304"><a href="#L-304"><span class="linenos">304</span></a><span class="k">class</span> <span class="nc">CustomJSONProperty</span><span class="p">(</span><span class="n">neomodel</span><span class="o">.</span><span class="n">JSONProperty</span><span class="p">):</span>
</span><span id="L-305"><a href="#L-305"><span class="linenos">305</span></a><span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-306"><a href="#L-306"><span class="linenos">306</span></a><span class="sd">	Property for storing specific data types as JSON objects in Neo4j</span>
</span><span id="L-307"><a href="#L-307"><span class="linenos">307</span></a><span class="sd">	&quot;&quot;&quot;</span>
</span><span id="L-308"><a href="#L-308"><span class="linenos">308</span></a>
</span><span id="L-309"><a href="#L-309"><span class="linenos">309</span></a>	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="L-310"><a href="#L-310"><span class="linenos">310</span></a>		<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="L-311"><a href="#L-311"><span class="linenos">311</span></a>
</span><span id="L-312"><a href="#L-312"><span class="linenos">312</span></a>	<span class="nd">@validator</span>
</span><span id="L-313"><a href="#L-313"><span class="linenos">313</span></a>	<span class="k">def</span> <span class="nf">inflate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataModelBase</span><span class="p">:</span>
</span><span id="L-314"><a href="#L-314"><span class="linenos">314</span></a>		<span class="k">return</span> <span class="n">CustomJSONDecoder</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span id="L-315"><a href="#L-315"><span class="linenos">315</span></a>
</span><span id="L-316"><a href="#L-316"><span class="linenos">316</span></a>	<span class="nd">@validator</span>
</span><span id="L-317"><a href="#L-317"><span class="linenos">317</span></a>	<span class="k">def</span> <span class="nf">deflate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">DataModelBase</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-318"><a href="#L-318"><span class="linenos">318</span></a>		<span class="k">return</span> <span class="n">CustomJSONEncoder</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span id="L-319"><a href="#L-319"><span class="linenos">319</span></a>
</span><span id="L-320"><a href="#L-320"><span class="linenos">320</span></a>
</span><span id="L-321"><a href="#L-321"><span class="linenos">321</span></a><span class="k">def</span> <span class="nf">map_model</span><span class="p">(</span><span class="n">database_url</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="L-322"><a href="#L-322"><span class="linenos">322</span></a>	<span class="k">global</span> <span class="n">signature_class_mapping</span><span class="p">,</span> <span class="n">class_signature_mapping</span>
</span><span id="L-323"><a href="#L-323"><span class="linenos">323</span></a>
</span><span id="L-324"><a href="#L-324"><span class="linenos">324</span></a>	<span class="kn">from</span> <span class="nn">open_precision.core.model.action</span> <span class="kn">import</span> <span class="n">Action</span>
</span><span id="L-325"><a href="#L-325"><span class="linenos">325</span></a>	<span class="kn">from</span> <span class="nn">open_precision.core.model.action_response</span> <span class="kn">import</span> <span class="n">ActionResponse</span>
</span><span id="L-326"><a href="#L-326"><span class="linenos">326</span></a>	<span class="kn">from</span> <span class="nn">open_precision.core.model.course</span> <span class="kn">import</span> <span class="n">Course</span>
</span><span id="L-327"><a href="#L-327"><span class="linenos">327</span></a>	<span class="kn">from</span> <span class="nn">open_precision.core.model.location</span> <span class="kn">import</span> <span class="n">Location</span>
</span><span id="L-328"><a href="#L-328"><span class="linenos">328</span></a>	<span class="kn">from</span> <span class="nn">open_precision.core.model.orientation</span> <span class="kn">import</span> <span class="n">Orientation</span>
</span><span id="L-329"><a href="#L-329"><span class="linenos">329</span></a>	<span class="kn">from</span> <span class="nn">open_precision.core.model.path</span> <span class="kn">import</span> <span class="n">Path</span>
</span><span id="L-330"><a href="#L-330"><span class="linenos">330</span></a>	<span class="kn">from</span> <span class="nn">open_precision.core.model.position</span> <span class="kn">import</span> <span class="n">Position</span>
</span><span id="L-331"><a href="#L-331"><span class="linenos">331</span></a>	<span class="kn">from</span> <span class="nn">open_precision.core.model.vehicle</span> <span class="kn">import</span> <span class="n">Vehicle</span>
</span><span id="L-332"><a href="#L-332"><span class="linenos">332</span></a>	<span class="kn">from</span> <span class="nn">open_precision.core.model.vehicle_state</span> <span class="kn">import</span> <span class="n">VehicleState</span>
</span><span id="L-333"><a href="#L-333"><span class="linenos">333</span></a>	<span class="kn">from</span> <span class="nn">open_precision.core.model.waypoint</span> <span class="kn">import</span> <span class="n">Waypoint</span>
</span><span id="L-334"><a href="#L-334"><span class="linenos">334</span></a>
</span><span id="L-335"><a href="#L-335"><span class="linenos">335</span></a>	<span class="n">neomodel</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">set_connection</span><span class="p">(</span><span class="n">database_url</span><span class="p">)</span>  <span class="c1"># database_url)</span>
</span><span id="L-336"><a href="#L-336"><span class="linenos">336</span></a>
</span><span id="L-337"><a href="#L-337"><span class="linenos">337</span></a>	<span class="n">data_model_classes</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">DataModelBase</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="L-338"><a href="#L-338"><span class="linenos">338</span></a>		<span class="n">Action</span><span class="p">,</span>
</span><span id="L-339"><a href="#L-339"><span class="linenos">339</span></a>		<span class="n">ActionResponse</span><span class="p">,</span>
</span><span id="L-340"><a href="#L-340"><span class="linenos">340</span></a>		<span class="n">Course</span><span class="p">,</span>
</span><span id="L-341"><a href="#L-341"><span class="linenos">341</span></a>		<span class="n">Location</span><span class="p">,</span>
</span><span id="L-342"><a href="#L-342"><span class="linenos">342</span></a>		<span class="n">Orientation</span><span class="p">,</span>
</span><span id="L-343"><a href="#L-343"><span class="linenos">343</span></a>		<span class="n">Path</span><span class="p">,</span>
</span><span id="L-344"><a href="#L-344"><span class="linenos">344</span></a>		<span class="n">Position</span><span class="p">,</span>
</span><span id="L-345"><a href="#L-345"><span class="linenos">345</span></a>		<span class="n">Vehicle</span><span class="p">,</span>
</span><span id="L-346"><a href="#L-346"><span class="linenos">346</span></a>		<span class="n">VehicleState</span><span class="p">,</span>
</span><span id="L-347"><a href="#L-347"><span class="linenos">347</span></a>		<span class="n">Waypoint</span><span class="p">,</span>
</span><span id="L-348"><a href="#L-348"><span class="linenos">348</span></a>	<span class="p">]</span>
</span><span id="L-349"><a href="#L-349"><span class="linenos">349</span></a>
</span><span id="L-350"><a href="#L-350"><span class="linenos">350</span></a>	<span class="n">neomodel</span><span class="o">.</span><span class="n">remove_all_labels</span><span class="p">()</span>
</span><span id="L-351"><a href="#L-351"><span class="linenos">351</span></a>	<span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="n">data_model_classes</span><span class="p">:</span>
</span><span id="L-352"><a href="#L-352"><span class="linenos">352</span></a>		<span class="n">neomodel</span><span class="o">.</span><span class="n">install_labels</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
</span><span id="L-353"><a href="#L-353"><span class="linenos">353</span></a>
</span><span id="L-354"><a href="#L-354"><span class="linenos">354</span></a>	<span class="c1"># generate class signature mapping for deserialization of json to data model classes</span>
</span><span id="L-355"><a href="#L-355"><span class="linenos">355</span></a>	<span class="n">signature_class_mapping</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-356"><a href="#L-356"><span class="linenos">356</span></a>		<span class="n">get_attributes</span><span class="p">(</span>
</span><span id="L-357"><a href="#L-357"><span class="linenos">357</span></a>			<span class="bp">cls</span><span class="p">,</span>
</span><span id="L-358"><a href="#L-358"><span class="linenos">358</span></a>			<span class="n">base_filter</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="n">DataModelBase</span><span class="p">,</span> <span class="n">StructuredNode</span><span class="p">],</span>
</span><span id="L-359"><a href="#L-359"><span class="linenos">359</span></a>			<span class="n">property_name_filter</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="ow">not</span> <span class="n">x</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">))</span>
</span><span id="L-360"><a href="#L-360"><span class="linenos">360</span></a>			<span class="ow">and</span> <span class="p">(</span>
</span><span id="L-361"><a href="#L-361"><span class="linenos">361</span></a>				<span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;DoesNotExist&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">]</span>
</span><span id="L-362"><a href="#L-362"><span class="linenos">362</span></a>				<span class="k">if</span> <span class="nb">issubclass</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">StructuredNode</span><span class="p">)</span>
</span><span id="L-363"><a href="#L-363"><span class="linenos">363</span></a>				<span class="k">else</span> <span class="kc">True</span>
</span><span id="L-364"><a href="#L-364"><span class="linenos">364</span></a>			<span class="p">),</span>
</span><span id="L-365"><a href="#L-365"><span class="linenos">365</span></a>			<span class="n">property_type_filter</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">FunctionType</span>
</span><span id="L-366"><a href="#L-366"><span class="linenos">366</span></a>			<span class="ow">and</span> <span class="ow">not</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">RelationshipDefinition</span><span class="p">),</span>
</span><span id="L-367"><a href="#L-367"><span class="linenos">367</span></a>		<span class="p">):</span> <span class="bp">cls</span>
</span><span id="L-368"><a href="#L-368"><span class="linenos">368</span></a>		<span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="n">data_model_classes</span>
</span><span id="L-369"><a href="#L-369"><span class="linenos">369</span></a>	<span class="p">}</span>
</span><span id="L-370"><a href="#L-370"><span class="linenos">370</span></a>
</span><span id="L-371"><a href="#L-371"><span class="linenos">371</span></a>	<span class="n">class_signature_mapping</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-372"><a href="#L-372"><span class="linenos">372</span></a>		<span class="n">v</span><span class="p">:</span> <span class="n">k</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">signature_class_mapping</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
</span><span id="L-373"><a href="#L-373"><span class="linenos">373</span></a>	<span class="p">}</span>  <span class="c1"># reverse lookup table for signature_class_mapping</span>
</span><span id="L-374"><a href="#L-374"><span class="linenos">374</span></a>
</span><span id="L-375"><a href="#L-375"><span class="linenos">375</span></a>	<span class="nb">print</span><span class="p">(</span><span class="n">class_signature_mapping</span><span class="p">)</span>
</span></pre></div>


            </section>
                <section id="signature_class_mapping">
                    <div class="attr variable">
            <span class="name">signature_class_mapping</span><span class="annotation">: dict</span>

        
    </div>
    <a class="headerlink" href="#signature_class_mapping"></a>
    
    

                </section>
                <section id="class_signature_mapping">
                    <div class="attr variable">
            <span class="name">class_signature_mapping</span><span class="annotation">: dict</span>

        
    </div>
    <a class="headerlink" href="#class_signature_mapping"></a>
    
    

                </section>
                <section id="persist_return">
                            <input id="persist_return-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">persist_return</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">func</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">built</span><span class="o">-</span><span class="ow">in</span> <span class="n">function</span> <span class="nb">callable</span><span class="o">&gt;</span></span><span class="return-annotation">) -> <span class="o">&lt;</span><span class="n">built</span><span class="o">-</span><span class="ow">in</span> <span class="n">function</span> <span class="nb">callable</span><span class="o">&gt;</span>:</span></span>

                <label class="view-source-button" for="persist_return-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#persist_return"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="persist_return-71"><a href="#persist_return-71"><span class="linenos">71</span></a><span class="k">def</span> <span class="nf">persist_return</span><span class="p">(</span><span class="n">func</span><span class="p">:</span> <span class="nb">callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">callable</span><span class="p">:</span>
</span><span id="persist_return-72"><a href="#persist_return-72"><span class="linenos">72</span></a><span class="w">	</span><span class="sd">&quot;&quot;&quot;this decorator will persist the return value of the decorated func when it is called&quot;&quot;&quot;</span>
</span><span id="persist_return-73"><a href="#persist_return-73"><span class="linenos">73</span></a>
</span><span id="persist_return-74"><a href="#persist_return-74"><span class="linenos">74</span></a>	<span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
</span><span id="persist_return-75"><a href="#persist_return-75"><span class="linenos">75</span></a>	<span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="persist_return-76"><a href="#persist_return-76"><span class="linenos">76</span></a>		<span class="n">val</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="persist_return-77"><a href="#persist_return-77"><span class="linenos">77</span></a>		<span class="k">if</span> <span class="n">is_iterable</span><span class="p">(</span><span class="n">val</span><span class="p">):</span>
</span><span id="persist_return-78"><a href="#persist_return-78"><span class="linenos">78</span></a>			<span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">save</span><span class="p">()</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">val</span><span class="p">]</span>
</span><span id="persist_return-79"><a href="#persist_return-79"><span class="linenos">79</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="persist_return-80"><a href="#persist_return-80"><span class="linenos">80</span></a>			<span class="n">val</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="persist_return-81"><a href="#persist_return-81"><span class="linenos">81</span></a>		<span class="k">return</span> <span class="n">val</span>
</span><span id="persist_return-82"><a href="#persist_return-82"><span class="linenos">82</span></a>
</span><span id="persist_return-83"><a href="#persist_return-83"><span class="linenos">83</span></a>	<span class="k">return</span> <span class="n">wrapper</span>
</span></pre></div>


            <div class="docstring"><p>this decorator will persist the return value of the decorated func when it is called</p>
</div>


                </section>
                <section id="persist_arg">
                            <input id="persist_arg-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">persist_arg</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">func</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">built</span><span class="o">-</span><span class="ow">in</span> <span class="n">function</span> <span class="nb">callable</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">position_or_kw</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">=</span> <span class="mi">0</span></span><span class="return-annotation">) -> <span class="o">&lt;</span><span class="n">built</span><span class="o">-</span><span class="ow">in</span> <span class="n">function</span> <span class="nb">callable</span><span class="o">&gt;</span>:</span></span>

                <label class="view-source-button" for="persist_arg-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#persist_arg"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="persist_arg-86"><a href="#persist_arg-86"><span class="linenos"> 86</span></a><span class="k">def</span> <span class="nf">persist_arg</span><span class="p">(</span><span class="n">func</span><span class="p">:</span> <span class="nb">callable</span><span class="p">,</span> <span class="n">position_or_kw</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">callable</span><span class="p">:</span>
</span><span id="persist_arg-87"><a href="#persist_arg-87"><span class="linenos"> 87</span></a><span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="persist_arg-88"><a href="#persist_arg-88"><span class="linenos"> 88</span></a><span class="sd">	this decorator will persist the argument of the decorated func when it is called</span>
</span><span id="persist_arg-89"><a href="#persist_arg-89"><span class="linenos"> 89</span></a><span class="sd">	:param func: the func to decorate</span>
</span><span id="persist_arg-90"><a href="#persist_arg-90"><span class="linenos"> 90</span></a><span class="sd">	:param position_or_kw: the position or keyword of the argument to persist, defaults to 0</span>
</span><span id="persist_arg-91"><a href="#persist_arg-91"><span class="linenos"> 91</span></a><span class="sd">	&quot;&quot;&quot;</span>
</span><span id="persist_arg-92"><a href="#persist_arg-92"><span class="linenos"> 92</span></a>
</span><span id="persist_arg-93"><a href="#persist_arg-93"><span class="linenos"> 93</span></a>	<span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
</span><span id="persist_arg-94"><a href="#persist_arg-94"><span class="linenos"> 94</span></a>	<span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="persist_arg-95"><a href="#persist_arg-95"><span class="linenos"> 95</span></a>		<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">position_or_kw</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="persist_arg-96"><a href="#persist_arg-96"><span class="linenos"> 96</span></a>			<span class="n">val</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">position_or_kw</span><span class="p">]</span>
</span><span id="persist_arg-97"><a href="#persist_arg-97"><span class="linenos"> 97</span></a>		<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">position_or_kw</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
</span><span id="persist_arg-98"><a href="#persist_arg-98"><span class="linenos"> 98</span></a>			<span class="n">val</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="persist_arg-99"><a href="#persist_arg-99"><span class="linenos"> 99</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="persist_arg-100"><a href="#persist_arg-100"><span class="linenos">100</span></a>			<span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;position_or_kw must be either an int or a str&quot;</span><span class="p">)</span>
</span><span id="persist_arg-101"><a href="#persist_arg-101"><span class="linenos">101</span></a>
</span><span id="persist_arg-102"><a href="#persist_arg-102"><span class="linenos">102</span></a>		<span class="k">if</span> <span class="n">is_iterable</span><span class="p">(</span><span class="n">val</span><span class="p">):</span>
</span><span id="persist_arg-103"><a href="#persist_arg-103"><span class="linenos">103</span></a>			<span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">save</span><span class="p">()</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">val</span><span class="p">]</span>
</span><span id="persist_arg-104"><a href="#persist_arg-104"><span class="linenos">104</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="persist_arg-105"><a href="#persist_arg-105"><span class="linenos">105</span></a>			<span class="n">val</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="persist_arg-106"><a href="#persist_arg-106"><span class="linenos">106</span></a>		<span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="persist_arg-107"><a href="#persist_arg-107"><span class="linenos">107</span></a>
</span><span id="persist_arg-108"><a href="#persist_arg-108"><span class="linenos">108</span></a>	<span class="k">return</span> <span class="n">wrapper</span>
</span></pre></div>


            <div class="docstring"><p>this decorator will persist the argument of the decorated func when it is called</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>func</strong>:  the func to decorate</li>
<li><strong>position_or_kw</strong>:  the position or keyword of the argument to persist, defaults to 0</li>
</ul>
</div>


                </section>
                <section id="DataModelBase">
                            <input id="DataModelBase-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">DataModelBase</span>:

                <label class="view-source-button" for="DataModelBase-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DataModelBase"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DataModelBase-175"><a href="#DataModelBase-175"><span class="linenos">175</span></a><span class="k">class</span> <span class="nc">DataModelBase</span><span class="p">:</span>
</span><span id="DataModelBase-176"><a href="#DataModelBase-176"><span class="linenos">176</span></a>	<span class="k">def</span> <span class="nf">to_json</span><span class="p">(</span>
</span><span id="DataModelBase-177"><a href="#DataModelBase-177"><span class="linenos">177</span></a>		<span class="bp">self</span><span class="p">,</span>
</span><span id="DataModelBase-178"><a href="#DataModelBase-178"><span class="linenos">178</span></a>		<span class="n">with_rels</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">RelationshipDefinition</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="DataModelBase-179"><a href="#DataModelBase-179"><span class="linenos">179</span></a>		<span class="n">field_key_filter</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="DataModelBase-180"><a href="#DataModelBase-180"><span class="linenos">180</span></a>		<span class="n">field_type_filter</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="DataModelBase-181"><a href="#DataModelBase-181"><span class="linenos">181</span></a>	<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="DataModelBase-182"><a href="#DataModelBase-182"><span class="linenos">182</span></a>		<span class="n">encoder</span> <span class="o">=</span> <span class="n">CustomJSONEncoder</span><span class="p">(</span>
</span><span id="DataModelBase-183"><a href="#DataModelBase-183"><span class="linenos">183</span></a>			<span class="n">field_type_filter</span><span class="o">=</span><span class="n">field_type_filter</span><span class="p">,</span> <span class="n">field_key_filter</span><span class="o">=</span><span class="n">field_key_filter</span>
</span><span id="DataModelBase-184"><a href="#DataModelBase-184"><span class="linenos">184</span></a>		<span class="p">)</span>
</span><span id="DataModelBase-185"><a href="#DataModelBase-185"><span class="linenos">185</span></a>		<span class="k">if</span> <span class="n">with_rels</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DataModelBase-186"><a href="#DataModelBase-186"><span class="linenos">186</span></a>			<span class="k">return</span> <span class="n">encoder</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="DataModelBase-187"><a href="#DataModelBase-187"><span class="linenos">187</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="DataModelBase-188"><a href="#DataModelBase-188"><span class="linenos">188</span></a>			<span class="n">objects</span><span class="p">,</span> <span class="n">connections</span> <span class="o">=</span> <span class="n">_resolve_object_conns</span><span class="p">(</span>
</span><span id="DataModelBase-189"><a href="#DataModelBase-189"><span class="linenos">189</span></a>				<span class="bp">self</span><span class="p">,</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">definition</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">with_rels</span><span class="p">]</span>
</span><span id="DataModelBase-190"><a href="#DataModelBase-190"><span class="linenos">190</span></a>			<span class="p">)</span>
</span><span id="DataModelBase-191"><a href="#DataModelBase-191"><span class="linenos">191</span></a>			<span class="n">composite_object_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;objects&quot;</span><span class="p">:</span> <span class="n">objects</span><span class="p">,</span> <span class="s2">&quot;connections&quot;</span><span class="p">:</span> <span class="n">connections</span><span class="p">}</span>
</span><span id="DataModelBase-192"><a href="#DataModelBase-192"><span class="linenos">192</span></a>			<span class="k">return</span> <span class="n">encoder</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">composite_object_dict</span><span class="p">)</span>
</span><span id="DataModelBase-193"><a href="#DataModelBase-193"><span class="linenos">193</span></a>
</span><span id="DataModelBase-194"><a href="#DataModelBase-194"><span class="linenos">194</span></a>	<span class="nd">@classmethod</span>
</span><span id="DataModelBase-195"><a href="#DataModelBase-195"><span class="linenos">195</span></a>	<span class="k">def</span> <span class="nf">from_json</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">json_string</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">with_conns</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="DataModelBase-196"><a href="#DataModelBase-196"><span class="linenos">196</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="DataModelBase-197"><a href="#DataModelBase-197"><span class="linenos">197</span></a><span class="sd">		Deserializes a json string to an object of the class. If the json string is a composite object (i.e. it contains</span>
</span><span id="DataModelBase-198"><a href="#DataModelBase-198"><span class="linenos">198</span></a><span class="sd">		connections), the main object is returned.</span>
</span><span id="DataModelBase-199"><a href="#DataModelBase-199"><span class="linenos">199</span></a><span class="sd">		If an object with the same uuid already exists in the database, it will be updated to have the properties of the</span>
</span><span id="DataModelBase-200"><a href="#DataModelBase-200"><span class="linenos">200</span></a><span class="sd">		serialized object and returned instead of a new object.</span>
</span><span id="DataModelBase-201"><a href="#DataModelBase-201"><span class="linenos">201</span></a>
</span><span id="DataModelBase-202"><a href="#DataModelBase-202"><span class="linenos">202</span></a><span class="sd">		:param json_string:</span>
</span><span id="DataModelBase-203"><a href="#DataModelBase-203"><span class="linenos">203</span></a><span class="sd">		:param with_conns:</span>
</span><span id="DataModelBase-204"><a href="#DataModelBase-204"><span class="linenos">204</span></a><span class="sd">		:return:</span>
</span><span id="DataModelBase-205"><a href="#DataModelBase-205"><span class="linenos">205</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="DataModelBase-206"><a href="#DataModelBase-206"><span class="linenos">206</span></a>		<span class="n">obj_dict</span> <span class="o">=</span> <span class="n">CustomJSONDecoder</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">json_string</span><span class="p">)</span>
</span><span id="DataModelBase-207"><a href="#DataModelBase-207"><span class="linenos">207</span></a>		<span class="k">if</span> <span class="n">obj_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span><span class="s2">&quot;objects&quot;</span><span class="p">,</span> <span class="s2">&quot;connections&quot;</span><span class="p">}:</span>
</span><span id="DataModelBase-208"><a href="#DataModelBase-208"><span class="linenos">208</span></a>			<span class="k">if</span> <span class="n">with_conns</span><span class="p">:</span>
</span><span id="DataModelBase-209"><a href="#DataModelBase-209"><span class="linenos">209</span></a>				<span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">obj_dict</span><span class="p">[</span><span class="s2">&quot;objects&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
</span><span id="DataModelBase-210"><a href="#DataModelBase-210"><span class="linenos">210</span></a>					<span class="n">obj</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="DataModelBase-211"><a href="#DataModelBase-211"><span class="linenos">211</span></a>				<span class="k">for</span> <span class="n">conn</span> <span class="ow">in</span> <span class="n">obj_dict</span><span class="p">[</span><span class="s2">&quot;connections&quot;</span><span class="p">]:</span>
</span><span id="DataModelBase-212"><a href="#DataModelBase-212"><span class="linenos">212</span></a>					<span class="n">obj_a</span> <span class="o">=</span> <span class="n">obj_dict</span><span class="p">[</span><span class="s2">&quot;objects&quot;</span><span class="p">][</span><span class="n">conn</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">]]</span>
</span><span id="DataModelBase-213"><a href="#DataModelBase-213"><span class="linenos">213</span></a>					<span class="n">obj_b</span> <span class="o">=</span> <span class="n">obj_dict</span><span class="p">[</span><span class="s2">&quot;objects&quot;</span><span class="p">][</span><span class="n">conn</span><span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">]]</span>
</span><span id="DataModelBase-214"><a href="#DataModelBase-214"><span class="linenos">214</span></a>					<span class="nb">getattr</span><span class="p">(</span><span class="n">obj_a</span><span class="p">,</span> <span class="n">conn</span><span class="p">[</span><span class="s2">&quot;relationship&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">obj_b</span><span class="p">)</span>
</span><span id="DataModelBase-215"><a href="#DataModelBase-215"><span class="linenos">215</span></a>			<span class="k">return</span> <span class="n">obj_dict</span><span class="p">[</span><span class="s2">&quot;objects&quot;</span><span class="p">][</span><span class="s2">&quot;main&quot;</span><span class="p">]</span>
</span><span id="DataModelBase-216"><a href="#DataModelBase-216"><span class="linenos">216</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="DataModelBase-217"><a href="#DataModelBase-217"><span class="linenos">217</span></a>			<span class="k">return</span> <span class="n">obj_dict</span>
</span></pre></div>


    

                            <div id="DataModelBase.to_json" class="classattr">
                                        <input id="DataModelBase.to_json-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">to_json</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">with_rels</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">neomodel</span><span class="o">.</span><span class="n">relationship_manager</span><span class="o">.</span><span class="n">RelationshipDefinition</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">field_key_filter</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">field_type_filter</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="DataModelBase.to_json-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DataModelBase.to_json"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DataModelBase.to_json-176"><a href="#DataModelBase.to_json-176"><span class="linenos">176</span></a>	<span class="k">def</span> <span class="nf">to_json</span><span class="p">(</span>
</span><span id="DataModelBase.to_json-177"><a href="#DataModelBase.to_json-177"><span class="linenos">177</span></a>		<span class="bp">self</span><span class="p">,</span>
</span><span id="DataModelBase.to_json-178"><a href="#DataModelBase.to_json-178"><span class="linenos">178</span></a>		<span class="n">with_rels</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">RelationshipDefinition</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="DataModelBase.to_json-179"><a href="#DataModelBase.to_json-179"><span class="linenos">179</span></a>		<span class="n">field_key_filter</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="DataModelBase.to_json-180"><a href="#DataModelBase.to_json-180"><span class="linenos">180</span></a>		<span class="n">field_type_filter</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="DataModelBase.to_json-181"><a href="#DataModelBase.to_json-181"><span class="linenos">181</span></a>	<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="DataModelBase.to_json-182"><a href="#DataModelBase.to_json-182"><span class="linenos">182</span></a>		<span class="n">encoder</span> <span class="o">=</span> <span class="n">CustomJSONEncoder</span><span class="p">(</span>
</span><span id="DataModelBase.to_json-183"><a href="#DataModelBase.to_json-183"><span class="linenos">183</span></a>			<span class="n">field_type_filter</span><span class="o">=</span><span class="n">field_type_filter</span><span class="p">,</span> <span class="n">field_key_filter</span><span class="o">=</span><span class="n">field_key_filter</span>
</span><span id="DataModelBase.to_json-184"><a href="#DataModelBase.to_json-184"><span class="linenos">184</span></a>		<span class="p">)</span>
</span><span id="DataModelBase.to_json-185"><a href="#DataModelBase.to_json-185"><span class="linenos">185</span></a>		<span class="k">if</span> <span class="n">with_rels</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="DataModelBase.to_json-186"><a href="#DataModelBase.to_json-186"><span class="linenos">186</span></a>			<span class="k">return</span> <span class="n">encoder</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="DataModelBase.to_json-187"><a href="#DataModelBase.to_json-187"><span class="linenos">187</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="DataModelBase.to_json-188"><a href="#DataModelBase.to_json-188"><span class="linenos">188</span></a>			<span class="n">objects</span><span class="p">,</span> <span class="n">connections</span> <span class="o">=</span> <span class="n">_resolve_object_conns</span><span class="p">(</span>
</span><span id="DataModelBase.to_json-189"><a href="#DataModelBase.to_json-189"><span class="linenos">189</span></a>				<span class="bp">self</span><span class="p">,</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">definition</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">with_rels</span><span class="p">]</span>
</span><span id="DataModelBase.to_json-190"><a href="#DataModelBase.to_json-190"><span class="linenos">190</span></a>			<span class="p">)</span>
</span><span id="DataModelBase.to_json-191"><a href="#DataModelBase.to_json-191"><span class="linenos">191</span></a>			<span class="n">composite_object_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;objects&quot;</span><span class="p">:</span> <span class="n">objects</span><span class="p">,</span> <span class="s2">&quot;connections&quot;</span><span class="p">:</span> <span class="n">connections</span><span class="p">}</span>
</span><span id="DataModelBase.to_json-192"><a href="#DataModelBase.to_json-192"><span class="linenos">192</span></a>			<span class="k">return</span> <span class="n">encoder</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">composite_object_dict</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="DataModelBase.from_json" class="classattr">
                                        <input id="DataModelBase.from_json-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@classmethod</div>

        <span class="def">def</span>
        <span class="name">from_json</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">cls</span>, </span><span class="param"><span class="n">json_string</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">with_conns</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="DataModelBase.from_json-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DataModelBase.from_json"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DataModelBase.from_json-194"><a href="#DataModelBase.from_json-194"><span class="linenos">194</span></a>	<span class="nd">@classmethod</span>
</span><span id="DataModelBase.from_json-195"><a href="#DataModelBase.from_json-195"><span class="linenos">195</span></a>	<span class="k">def</span> <span class="nf">from_json</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">json_string</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">with_conns</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="DataModelBase.from_json-196"><a href="#DataModelBase.from_json-196"><span class="linenos">196</span></a><span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="DataModelBase.from_json-197"><a href="#DataModelBase.from_json-197"><span class="linenos">197</span></a><span class="sd">		Deserializes a json string to an object of the class. If the json string is a composite object (i.e. it contains</span>
</span><span id="DataModelBase.from_json-198"><a href="#DataModelBase.from_json-198"><span class="linenos">198</span></a><span class="sd">		connections), the main object is returned.</span>
</span><span id="DataModelBase.from_json-199"><a href="#DataModelBase.from_json-199"><span class="linenos">199</span></a><span class="sd">		If an object with the same uuid already exists in the database, it will be updated to have the properties of the</span>
</span><span id="DataModelBase.from_json-200"><a href="#DataModelBase.from_json-200"><span class="linenos">200</span></a><span class="sd">		serialized object and returned instead of a new object.</span>
</span><span id="DataModelBase.from_json-201"><a href="#DataModelBase.from_json-201"><span class="linenos">201</span></a>
</span><span id="DataModelBase.from_json-202"><a href="#DataModelBase.from_json-202"><span class="linenos">202</span></a><span class="sd">		:param json_string:</span>
</span><span id="DataModelBase.from_json-203"><a href="#DataModelBase.from_json-203"><span class="linenos">203</span></a><span class="sd">		:param with_conns:</span>
</span><span id="DataModelBase.from_json-204"><a href="#DataModelBase.from_json-204"><span class="linenos">204</span></a><span class="sd">		:return:</span>
</span><span id="DataModelBase.from_json-205"><a href="#DataModelBase.from_json-205"><span class="linenos">205</span></a><span class="sd">		&quot;&quot;&quot;</span>
</span><span id="DataModelBase.from_json-206"><a href="#DataModelBase.from_json-206"><span class="linenos">206</span></a>		<span class="n">obj_dict</span> <span class="o">=</span> <span class="n">CustomJSONDecoder</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">json_string</span><span class="p">)</span>
</span><span id="DataModelBase.from_json-207"><a href="#DataModelBase.from_json-207"><span class="linenos">207</span></a>		<span class="k">if</span> <span class="n">obj_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span><span class="s2">&quot;objects&quot;</span><span class="p">,</span> <span class="s2">&quot;connections&quot;</span><span class="p">}:</span>
</span><span id="DataModelBase.from_json-208"><a href="#DataModelBase.from_json-208"><span class="linenos">208</span></a>			<span class="k">if</span> <span class="n">with_conns</span><span class="p">:</span>
</span><span id="DataModelBase.from_json-209"><a href="#DataModelBase.from_json-209"><span class="linenos">209</span></a>				<span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">obj_dict</span><span class="p">[</span><span class="s2">&quot;objects&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
</span><span id="DataModelBase.from_json-210"><a href="#DataModelBase.from_json-210"><span class="linenos">210</span></a>					<span class="n">obj</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="DataModelBase.from_json-211"><a href="#DataModelBase.from_json-211"><span class="linenos">211</span></a>				<span class="k">for</span> <span class="n">conn</span> <span class="ow">in</span> <span class="n">obj_dict</span><span class="p">[</span><span class="s2">&quot;connections&quot;</span><span class="p">]:</span>
</span><span id="DataModelBase.from_json-212"><a href="#DataModelBase.from_json-212"><span class="linenos">212</span></a>					<span class="n">obj_a</span> <span class="o">=</span> <span class="n">obj_dict</span><span class="p">[</span><span class="s2">&quot;objects&quot;</span><span class="p">][</span><span class="n">conn</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">]]</span>
</span><span id="DataModelBase.from_json-213"><a href="#DataModelBase.from_json-213"><span class="linenos">213</span></a>					<span class="n">obj_b</span> <span class="o">=</span> <span class="n">obj_dict</span><span class="p">[</span><span class="s2">&quot;objects&quot;</span><span class="p">][</span><span class="n">conn</span><span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">]]</span>
</span><span id="DataModelBase.from_json-214"><a href="#DataModelBase.from_json-214"><span class="linenos">214</span></a>					<span class="nb">getattr</span><span class="p">(</span><span class="n">obj_a</span><span class="p">,</span> <span class="n">conn</span><span class="p">[</span><span class="s2">&quot;relationship&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">obj_b</span><span class="p">)</span>
</span><span id="DataModelBase.from_json-215"><a href="#DataModelBase.from_json-215"><span class="linenos">215</span></a>			<span class="k">return</span> <span class="n">obj_dict</span><span class="p">[</span><span class="s2">&quot;objects&quot;</span><span class="p">][</span><span class="s2">&quot;main&quot;</span><span class="p">]</span>
</span><span id="DataModelBase.from_json-216"><a href="#DataModelBase.from_json-216"><span class="linenos">216</span></a>		<span class="k">else</span><span class="p">:</span>
</span><span id="DataModelBase.from_json-217"><a href="#DataModelBase.from_json-217"><span class="linenos">217</span></a>			<span class="k">return</span> <span class="n">obj_dict</span>
</span></pre></div>


            <div class="docstring"><p>Deserializes a json string to an object of the class. If the json string is a composite object (i.e. it contains
connections), the main object is returned.
If an object with the same uuid already exists in the database, it will be updated to have the properties of the
serialized object and returned instead of a new object.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>json_string</strong>: </li>
<li><strong>with_conns</strong>: </li>
</ul>

<h6 id="returns">Returns</h6>
</div>


                            </div>
                </section>
                <section id="CustomJSONEncoder">
                            <input id="CustomJSONEncoder-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">CustomJSONEncoder</span><wbr>(<span class="base">json.encoder.JSONEncoder</span>):

                <label class="view-source-button" for="CustomJSONEncoder-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CustomJSONEncoder"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CustomJSONEncoder-221"><a href="#CustomJSONEncoder-221"><span class="linenos">221</span></a><span class="k">class</span> <span class="nc">CustomJSONEncoder</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">JSONEncoder</span><span class="p">):</span>
</span><span id="CustomJSONEncoder-222"><a href="#CustomJSONEncoder-222"><span class="linenos">222</span></a>	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
</span><span id="CustomJSONEncoder-223"><a href="#CustomJSONEncoder-223"><span class="linenos">223</span></a>		<span class="bp">self</span><span class="p">,</span>
</span><span id="CustomJSONEncoder-224"><a href="#CustomJSONEncoder-224"><span class="linenos">224</span></a>		<span class="o">*</span><span class="n">args</span><span class="p">,</span>
</span><span id="CustomJSONEncoder-225"><a href="#CustomJSONEncoder-225"><span class="linenos">225</span></a>		<span class="n">field_key_filter</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="CustomJSONEncoder-226"><a href="#CustomJSONEncoder-226"><span class="linenos">226</span></a>		<span class="n">field_type_filter</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="CustomJSONEncoder-227"><a href="#CustomJSONEncoder-227"><span class="linenos">227</span></a>		<span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
</span><span id="CustomJSONEncoder-228"><a href="#CustomJSONEncoder-228"><span class="linenos">228</span></a>	<span class="p">):</span>
</span><span id="CustomJSONEncoder-229"><a href="#CustomJSONEncoder-229"><span class="linenos">229</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">field_key_filter</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="CustomJSONEncoder-230"><a href="#CustomJSONEncoder-230"><span class="linenos">230</span></a>			<span class="n">field_key_filter</span> <span class="k">if</span> <span class="n">field_key_filter</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="kc">True</span>
</span><span id="CustomJSONEncoder-231"><a href="#CustomJSONEncoder-231"><span class="linenos">231</span></a>		<span class="p">)</span>
</span><span id="CustomJSONEncoder-232"><a href="#CustomJSONEncoder-232"><span class="linenos">232</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">field_type_filter</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="CustomJSONEncoder-233"><a href="#CustomJSONEncoder-233"><span class="linenos">233</span></a>			<span class="n">field_type_filter</span> <span class="k">if</span> <span class="n">field_type_filter</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="kc">True</span>
</span><span id="CustomJSONEncoder-234"><a href="#CustomJSONEncoder-234"><span class="linenos">234</span></a>		<span class="p">)</span>
</span><span id="CustomJSONEncoder-235"><a href="#CustomJSONEncoder-235"><span class="linenos">235</span></a>		<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="CustomJSONEncoder-236"><a href="#CustomJSONEncoder-236"><span class="linenos">236</span></a>
</span><span id="CustomJSONEncoder-237"><a href="#CustomJSONEncoder-237"><span class="linenos">237</span></a>	<span class="c1"># overload method default</span>
</span><span id="CustomJSONEncoder-238"><a href="#CustomJSONEncoder-238"><span class="linenos">238</span></a>	<span class="k">def</span> <span class="nf">default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
</span><span id="CustomJSONEncoder-239"><a href="#CustomJSONEncoder-239"><span class="linenos">239</span></a>		<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">DataModelBase</span><span class="p">):</span>
</span><span id="CustomJSONEncoder-240"><a href="#CustomJSONEncoder-240"><span class="linenos">240</span></a>			<span class="n">ret</span> <span class="o">=</span> <span class="p">{</span><span class="n">x</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">class_signature_mapping</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="vm">__class__</span><span class="p">]}</span>
</span><span id="CustomJSONEncoder-241"><a href="#CustomJSONEncoder-241"><span class="linenos">241</span></a>			<span class="n">ret</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="CustomJSONEncoder-242"><a href="#CustomJSONEncoder-242"><span class="linenos">242</span></a>				<span class="n">k</span><span class="p">:</span> <span class="n">v</span>
</span><span id="CustomJSONEncoder-243"><a href="#CustomJSONEncoder-243"><span class="linenos">243</span></a>				<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">ret</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
</span><span id="CustomJSONEncoder-244"><a href="#CustomJSONEncoder-244"><span class="linenos">244</span></a>				<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_key_filter</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_type_filter</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
</span><span id="CustomJSONEncoder-245"><a href="#CustomJSONEncoder-245"><span class="linenos">245</span></a>			<span class="p">}</span>
</span><span id="CustomJSONEncoder-246"><a href="#CustomJSONEncoder-246"><span class="linenos">246</span></a>			<span class="k">return</span> <span class="n">ret</span>
</span><span id="CustomJSONEncoder-247"><a href="#CustomJSONEncoder-247"><span class="linenos">247</span></a>		<span class="k">elif</span> <span class="n">obj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CustomJSONEncoder-248"><a href="#CustomJSONEncoder-248"><span class="linenos">248</span></a>			<span class="k">return</span> <span class="s2">&quot;null&quot;</span>
</span><span id="CustomJSONEncoder-249"><a href="#CustomJSONEncoder-249"><span class="linenos">249</span></a>		<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">Quaternion</span><span class="p">):</span>
</span><span id="CustomJSONEncoder-250"><a href="#CustomJSONEncoder-250"><span class="linenos">250</span></a>			<span class="k">return</span> <span class="p">{</span><span class="s2">&quot;q&quot;</span><span class="p">:</span> <span class="n">obj</span><span class="o">.</span><span class="n">q</span><span class="o">.</span><span class="n">tolist</span><span class="p">()}</span>
</span><span id="CustomJSONEncoder-251"><a href="#CustomJSONEncoder-251"><span class="linenos">251</span></a>		<span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">JSONEncoder</span><span class="o">.</span><span class="n">default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Extensible JSON <a href="https://json.org">https://json.org</a> encoder for Python data structures.</p>

<p>Supports the following objects and types by default:</p>

<p>+-------------------+---------------+
| Python            | JSON          |
+===================+===============+
| dict              | object        |
+-------------------+---------------+
| list, tuple       | array         |
+-------------------+---------------+
| str               | string        |
+-------------------+---------------+
| int, float        | number        |
+-------------------+---------------+
| True              | true          |
+-------------------+---------------+
| False             | false         |
+-------------------+---------------+
| None              | null          |
+-------------------+---------------+</p>

<p>To extend this to recognize other objects, subclass and implement a
<code>.default()</code> method with another method that returns a serializable
object for <code>o</code> if possible, otherwise it should call the superclass
implementation (to raise <code>TypeError</code>).</p>
</div>


                            <div id="CustomJSONEncoder.__init__" class="classattr">
                                        <input id="CustomJSONEncoder.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">CustomJSONEncoder</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="o">*</span><span class="n">args</span>,</span><span class="param">	<span class="n">field_key_filter</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">field_type_filter</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="o">**</span><span class="n">kwargs</span></span>)</span>

                <label class="view-source-button" for="CustomJSONEncoder.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CustomJSONEncoder.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CustomJSONEncoder.__init__-222"><a href="#CustomJSONEncoder.__init__-222"><span class="linenos">222</span></a>	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
</span><span id="CustomJSONEncoder.__init__-223"><a href="#CustomJSONEncoder.__init__-223"><span class="linenos">223</span></a>		<span class="bp">self</span><span class="p">,</span>
</span><span id="CustomJSONEncoder.__init__-224"><a href="#CustomJSONEncoder.__init__-224"><span class="linenos">224</span></a>		<span class="o">*</span><span class="n">args</span><span class="p">,</span>
</span><span id="CustomJSONEncoder.__init__-225"><a href="#CustomJSONEncoder.__init__-225"><span class="linenos">225</span></a>		<span class="n">field_key_filter</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="CustomJSONEncoder.__init__-226"><a href="#CustomJSONEncoder.__init__-226"><span class="linenos">226</span></a>		<span class="n">field_type_filter</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="CustomJSONEncoder.__init__-227"><a href="#CustomJSONEncoder.__init__-227"><span class="linenos">227</span></a>		<span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
</span><span id="CustomJSONEncoder.__init__-228"><a href="#CustomJSONEncoder.__init__-228"><span class="linenos">228</span></a>	<span class="p">):</span>
</span><span id="CustomJSONEncoder.__init__-229"><a href="#CustomJSONEncoder.__init__-229"><span class="linenos">229</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">field_key_filter</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="CustomJSONEncoder.__init__-230"><a href="#CustomJSONEncoder.__init__-230"><span class="linenos">230</span></a>			<span class="n">field_key_filter</span> <span class="k">if</span> <span class="n">field_key_filter</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="kc">True</span>
</span><span id="CustomJSONEncoder.__init__-231"><a href="#CustomJSONEncoder.__init__-231"><span class="linenos">231</span></a>		<span class="p">)</span>
</span><span id="CustomJSONEncoder.__init__-232"><a href="#CustomJSONEncoder.__init__-232"><span class="linenos">232</span></a>		<span class="bp">self</span><span class="o">.</span><span class="n">field_type_filter</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="CustomJSONEncoder.__init__-233"><a href="#CustomJSONEncoder.__init__-233"><span class="linenos">233</span></a>			<span class="n">field_type_filter</span> <span class="k">if</span> <span class="n">field_type_filter</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="kc">True</span>
</span><span id="CustomJSONEncoder.__init__-234"><a href="#CustomJSONEncoder.__init__-234"><span class="linenos">234</span></a>		<span class="p">)</span>
</span><span id="CustomJSONEncoder.__init__-235"><a href="#CustomJSONEncoder.__init__-235"><span class="linenos">235</span></a>		<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Constructor for JSONEncoder, with sensible defaults.</p>

<p>If skipkeys is false, then it is a TypeError to attempt
encoding of keys that are not str, int, float or None.  If
skipkeys is True, such items are simply skipped.</p>

<p>If ensure_ascii is true, the output is guaranteed to be str
objects with all incoming non-ASCII characters escaped.  If
ensure_ascii is false, the output can contain non-ASCII characters.</p>

<p>If check_circular is true, then lists, dicts, and custom encoded
objects will be checked for circular references during encoding to
prevent an infinite recursion (which would cause an RecursionError).
Otherwise, no such check takes place.</p>

<p>If allow_nan is true, then NaN, Infinity, and -Infinity will be
encoded as such.  This behavior is not JSON specification compliant,
but is consistent with most JavaScript based encoders and decoders.
Otherwise, it will be a ValueError to encode such floats.</p>

<p>If sort_keys is true, then the output of dictionaries will be
sorted by key; this is useful for regression tests to ensure
that JSON serializations can be compared on a day-to-day basis.</p>

<p>If indent is a non-negative integer, then JSON array
elements and object members will be pretty-printed with that
indent level.  An indent level of 0 will only insert newlines.
None is the most compact representation.</p>

<p>If specified, separators should be an (item_separator, key_separator)
tuple.  The default is (', ', ': ') if <em>indent</em> is <code>None</code> and
(',', ': ') otherwise.  To get the most compact JSON representation,
you should specify (',', ':') to eliminate whitespace.</p>

<p>If specified, default is a function that gets called for objects
that can't otherwise be serialized.  It should return a JSON encodable
version of the object or raise a <code>TypeError</code>.</p>
</div>


                            </div>
                            <div id="CustomJSONEncoder.field_key_filter" class="classattr">
                                <div class="attr variable">
            <span class="name">field_key_filter</span>

        
    </div>
    <a class="headerlink" href="#CustomJSONEncoder.field_key_filter"></a>
    
    

                            </div>
                            <div id="CustomJSONEncoder.field_type_filter" class="classattr">
                                <div class="attr variable">
            <span class="name">field_type_filter</span>

        
    </div>
    <a class="headerlink" href="#CustomJSONEncoder.field_type_filter"></a>
    
    

                            </div>
                            <div id="CustomJSONEncoder.default" class="classattr">
                                        <input id="CustomJSONEncoder.default-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">default</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">obj</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CustomJSONEncoder.default-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CustomJSONEncoder.default"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CustomJSONEncoder.default-238"><a href="#CustomJSONEncoder.default-238"><span class="linenos">238</span></a>	<span class="k">def</span> <span class="nf">default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
</span><span id="CustomJSONEncoder.default-239"><a href="#CustomJSONEncoder.default-239"><span class="linenos">239</span></a>		<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">DataModelBase</span><span class="p">):</span>
</span><span id="CustomJSONEncoder.default-240"><a href="#CustomJSONEncoder.default-240"><span class="linenos">240</span></a>			<span class="n">ret</span> <span class="o">=</span> <span class="p">{</span><span class="n">x</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">class_signature_mapping</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="vm">__class__</span><span class="p">]}</span>
</span><span id="CustomJSONEncoder.default-241"><a href="#CustomJSONEncoder.default-241"><span class="linenos">241</span></a>			<span class="n">ret</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="CustomJSONEncoder.default-242"><a href="#CustomJSONEncoder.default-242"><span class="linenos">242</span></a>				<span class="n">k</span><span class="p">:</span> <span class="n">v</span>
</span><span id="CustomJSONEncoder.default-243"><a href="#CustomJSONEncoder.default-243"><span class="linenos">243</span></a>				<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">ret</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
</span><span id="CustomJSONEncoder.default-244"><a href="#CustomJSONEncoder.default-244"><span class="linenos">244</span></a>				<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_key_filter</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_type_filter</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
</span><span id="CustomJSONEncoder.default-245"><a href="#CustomJSONEncoder.default-245"><span class="linenos">245</span></a>			<span class="p">}</span>
</span><span id="CustomJSONEncoder.default-246"><a href="#CustomJSONEncoder.default-246"><span class="linenos">246</span></a>			<span class="k">return</span> <span class="n">ret</span>
</span><span id="CustomJSONEncoder.default-247"><a href="#CustomJSONEncoder.default-247"><span class="linenos">247</span></a>		<span class="k">elif</span> <span class="n">obj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CustomJSONEncoder.default-248"><a href="#CustomJSONEncoder.default-248"><span class="linenos">248</span></a>			<span class="k">return</span> <span class="s2">&quot;null&quot;</span>
</span><span id="CustomJSONEncoder.default-249"><a href="#CustomJSONEncoder.default-249"><span class="linenos">249</span></a>		<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">Quaternion</span><span class="p">):</span>
</span><span id="CustomJSONEncoder.default-250"><a href="#CustomJSONEncoder.default-250"><span class="linenos">250</span></a>			<span class="k">return</span> <span class="p">{</span><span class="s2">&quot;q&quot;</span><span class="p">:</span> <span class="n">obj</span><span class="o">.</span><span class="n">q</span><span class="o">.</span><span class="n">tolist</span><span class="p">()}</span>
</span><span id="CustomJSONEncoder.default-251"><a href="#CustomJSONEncoder.default-251"><span class="linenos">251</span></a>		<span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">JSONEncoder</span><span class="o">.</span><span class="n">default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Implement this method in a subclass such that it returns
a serializable object for <code>o</code>, or calls the base implementation
(to raise a <code>TypeError</code>).</p>

<p>For example, to support arbitrary iterators, you could
implement default like this::</p>

<pre><code>def default(self, o):
    try:
        iterable = iter(o)
    except TypeError:
        pass
    else:
        return list(iterable)
    # Let the base class default method raise the TypeError
    return JSONEncoder.default(self, o)
</code></pre>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt>json.encoder.JSONEncoder</dt>
                                <dd id="CustomJSONEncoder.item_separator" class="variable">item_separator</dd>
                <dd id="CustomJSONEncoder.key_separator" class="variable">key_separator</dd>
                <dd id="CustomJSONEncoder.skipkeys" class="variable">skipkeys</dd>
                <dd id="CustomJSONEncoder.ensure_ascii" class="variable">ensure_ascii</dd>
                <dd id="CustomJSONEncoder.check_circular" class="variable">check_circular</dd>
                <dd id="CustomJSONEncoder.allow_nan" class="variable">allow_nan</dd>
                <dd id="CustomJSONEncoder.sort_keys" class="variable">sort_keys</dd>
                <dd id="CustomJSONEncoder.indent" class="variable">indent</dd>
                <dd id="CustomJSONEncoder.encode" class="function">encode</dd>
                <dd id="CustomJSONEncoder.iterencode" class="function">iterencode</dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="CustomJSONDecoder">
                            <input id="CustomJSONDecoder-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">CustomJSONDecoder</span><wbr>(<span class="base">json.decoder.JSONDecoder</span>):

                <label class="view-source-button" for="CustomJSONDecoder-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CustomJSONDecoder"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CustomJSONDecoder-254"><a href="#CustomJSONDecoder-254"><span class="linenos">254</span></a><span class="k">class</span> <span class="nc">CustomJSONDecoder</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">JSONDecoder</span><span class="p">):</span>
</span><span id="CustomJSONDecoder-255"><a href="#CustomJSONDecoder-255"><span class="linenos">255</span></a><span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="CustomJSONDecoder-256"><a href="#CustomJSONDecoder-256"><span class="linenos">256</span></a><span class="sd">	JSON decoder that is able to reconstruct subclasses of DataModelBase from JSON by matching keys with class attribute</span>
</span><span id="CustomJSONDecoder-257"><a href="#CustomJSONDecoder-257"><span class="linenos">257</span></a><span class="sd">	names. Relationship fields will be ignored.</span>
</span><span id="CustomJSONDecoder-258"><a href="#CustomJSONDecoder-258"><span class="linenos">258</span></a><span class="sd">	&quot;&quot;&quot;</span>
</span><span id="CustomJSONDecoder-259"><a href="#CustomJSONDecoder-259"><span class="linenos">259</span></a>
</span><span id="CustomJSONDecoder-260"><a href="#CustomJSONDecoder-260"><span class="linenos">260</span></a>	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="CustomJSONDecoder-261"><a href="#CustomJSONDecoder-261"><span class="linenos">261</span></a>		<span class="n">json</span><span class="o">.</span><span class="n">JSONDecoder</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_hook</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">object_hook</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="CustomJSONDecoder-262"><a href="#CustomJSONDecoder-262"><span class="linenos">262</span></a>
</span><span id="CustomJSONDecoder-263"><a href="#CustomJSONDecoder-263"><span class="linenos">263</span></a>	<span class="k">def</span> <span class="nf">object_hook</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
</span><span id="CustomJSONDecoder-264"><a href="#CustomJSONDecoder-264"><span class="linenos">264</span></a>		<span class="c1"># handling the resolution of nested objects</span>
</span><span id="CustomJSONDecoder-265"><a href="#CustomJSONDecoder-265"><span class="linenos">265</span></a>		<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="CustomJSONDecoder-266"><a href="#CustomJSONDecoder-266"><span class="linenos">266</span></a>			<span class="n">keys_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</span><span id="CustomJSONDecoder-267"><a href="#CustomJSONDecoder-267"><span class="linenos">267</span></a>
</span><span id="CustomJSONDecoder-268"><a href="#CustomJSONDecoder-268"><span class="linenos">268</span></a>			<span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys_set</span><span class="p">:</span>
</span><span id="CustomJSONDecoder-269"><a href="#CustomJSONDecoder-269"><span class="linenos">269</span></a>				<span class="n">obj</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">object_hook</span><span class="p">(</span><span class="n">obj</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
</span><span id="CustomJSONDecoder-270"><a href="#CustomJSONDecoder-270"><span class="linenos">270</span></a>
</span><span id="CustomJSONDecoder-271"><a href="#CustomJSONDecoder-271"><span class="linenos">271</span></a>			<span class="c1"># check for quaternion</span>
</span><span id="CustomJSONDecoder-272"><a href="#CustomJSONDecoder-272"><span class="linenos">272</span></a>			<span class="k">if</span> <span class="n">keys_set</span> <span class="o">==</span> <span class="p">{</span><span class="s2">&quot;q&quot;</span><span class="p">}:</span>
</span><span id="CustomJSONDecoder-273"><a href="#CustomJSONDecoder-273"><span class="linenos">273</span></a>				<span class="k">return</span> <span class="n">Quaternion</span><span class="p">(</span><span class="n">obj</span><span class="p">[</span><span class="s2">&quot;q&quot;</span><span class="p">])</span>
</span><span id="CustomJSONDecoder-274"><a href="#CustomJSONDecoder-274"><span class="linenos">274</span></a>
</span><span id="CustomJSONDecoder-275"><a href="#CustomJSONDecoder-275"><span class="linenos">275</span></a>			<span class="c1"># check if the dict is a signature of a class</span>
</span><span id="CustomJSONDecoder-276"><a href="#CustomJSONDecoder-276"><span class="linenos">276</span></a>			<span class="k">for</span> <span class="n">signature</span><span class="p">,</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="n">signature_class_mapping</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="CustomJSONDecoder-277"><a href="#CustomJSONDecoder-277"><span class="linenos">277</span></a>				<span class="k">if</span> <span class="n">signature</span> <span class="o">==</span> <span class="n">keys_set</span><span class="p">:</span>
</span><span id="CustomJSONDecoder-278"><a href="#CustomJSONDecoder-278"><span class="linenos">278</span></a>					<span class="k">if</span> <span class="s2">&quot;uuid&quot;</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="CustomJSONDecoder-279"><a href="#CustomJSONDecoder-279"><span class="linenos">279</span></a>						<span class="n">ret</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">get_or_none</span><span class="p">(</span><span class="n">uuid</span><span class="o">=</span><span class="n">obj</span><span class="p">[</span><span class="s2">&quot;uuid&quot;</span><span class="p">])</span>
</span><span id="CustomJSONDecoder-280"><a href="#CustomJSONDecoder-280"><span class="linenos">280</span></a>						<span class="k">if</span> <span class="n">ret</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CustomJSONDecoder-281"><a href="#CustomJSONDecoder-281"><span class="linenos">281</span></a>							<span class="c1"># update the object with the new values</span>
</span><span id="CustomJSONDecoder-282"><a href="#CustomJSONDecoder-282"><span class="linenos">282</span></a>							<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="CustomJSONDecoder-283"><a href="#CustomJSONDecoder-283"><span class="linenos">283</span></a>								<span class="nb">setattr</span><span class="p">(</span><span class="n">ret</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="CustomJSONDecoder-284"><a href="#CustomJSONDecoder-284"><span class="linenos">284</span></a>							<span class="n">ret</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="CustomJSONDecoder-285"><a href="#CustomJSONDecoder-285"><span class="linenos">285</span></a>
</span><span id="CustomJSONDecoder-286"><a href="#CustomJSONDecoder-286"><span class="linenos">286</span></a>							<span class="k">return</span> <span class="n">ret</span>
</span><span id="CustomJSONDecoder-287"><a href="#CustomJSONDecoder-287"><span class="linenos">287</span></a><span class="w">					</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="CustomJSONDecoder-288"><a href="#CustomJSONDecoder-288"><span class="linenos">288</span></a><span class="sd">                    # remove relation information from dict</span>
</span><span id="CustomJSONDecoder-289"><a href="#CustomJSONDecoder-289"><span class="linenos">289</span></a><span class="sd">                    obj = {k: v for k, v in obj.items() if</span>
</span><span id="CustomJSONDecoder-290"><a href="#CustomJSONDecoder-290"><span class="linenos">290</span></a><span class="sd">                           not issubclass(type(getattr(cls, k)), RelationshipDefinition)}</span>
</span><span id="CustomJSONDecoder-291"><a href="#CustomJSONDecoder-291"><span class="linenos">291</span></a><span class="sd">                    &quot;&quot;&quot;</span>
</span><span id="CustomJSONDecoder-292"><a href="#CustomJSONDecoder-292"><span class="linenos">292</span></a>					<span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="o">**</span><span class="n">obj</span><span class="p">)</span>
</span><span id="CustomJSONDecoder-293"><a href="#CustomJSONDecoder-293"><span class="linenos">293</span></a>			<span class="k">else</span><span class="p">:</span>
</span><span id="CustomJSONDecoder-294"><a href="#CustomJSONDecoder-294"><span class="linenos">294</span></a>				<span class="k">return</span> <span class="n">obj</span>
</span><span id="CustomJSONDecoder-295"><a href="#CustomJSONDecoder-295"><span class="linenos">295</span></a>
</span><span id="CustomJSONDecoder-296"><a href="#CustomJSONDecoder-296"><span class="linenos">296</span></a>		<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="CustomJSONDecoder-297"><a href="#CustomJSONDecoder-297"><span class="linenos">297</span></a>			<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">obj</span><span class="p">)):</span>
</span><span id="CustomJSONDecoder-298"><a href="#CustomJSONDecoder-298"><span class="linenos">298</span></a>				<span class="n">obj</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">object_hook</span><span class="p">(</span><span class="n">obj</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</span><span id="CustomJSONDecoder-299"><a href="#CustomJSONDecoder-299"><span class="linenos">299</span></a>
</span><span id="CustomJSONDecoder-300"><a href="#CustomJSONDecoder-300"><span class="linenos">300</span></a>			<span class="k">return</span> <span class="n">obj</span>
</span><span id="CustomJSONDecoder-301"><a href="#CustomJSONDecoder-301"><span class="linenos">301</span></a>
</span><span id="CustomJSONDecoder-302"><a href="#CustomJSONDecoder-302"><span class="linenos">302</span></a>		<span class="k">return</span> <span class="n">obj</span>
</span></pre></div>


            <div class="docstring"><p>JSON decoder that is able to reconstruct subclasses of DataModelBase from JSON by matching keys with class attribute
names. Relationship fields will be ignored.</p>
</div>


                            <div id="CustomJSONDecoder.__init__" class="classattr">
                                        <input id="CustomJSONDecoder.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">CustomJSONDecoder</span><span class="signature pdoc-code condensed">(<span class="param"><span class="o">*</span><span class="n">args</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span>)</span>

                <label class="view-source-button" for="CustomJSONDecoder.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CustomJSONDecoder.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CustomJSONDecoder.__init__-260"><a href="#CustomJSONDecoder.__init__-260"><span class="linenos">260</span></a>	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="CustomJSONDecoder.__init__-261"><a href="#CustomJSONDecoder.__init__-261"><span class="linenos">261</span></a>		<span class="n">json</span><span class="o">.</span><span class="n">JSONDecoder</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_hook</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">object_hook</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p><code><a href="#CustomJSONDecoder.object_hook">object_hook</a></code>, if specified, will be called with the result
of every JSON object decoded and its return value will be used in
place of the given <code>dict</code>.  This can be used to provide custom
deserializations (e.g. to support JSON-RPC class hinting).</p>

<p><code><a href="#CustomJSONDecoder.object_pairs_hook">object_pairs_hook</a></code>, if specified will be called with the result of
every JSON object decoded with an ordered list of pairs.  The return
value of <code><a href="#CustomJSONDecoder.object_pairs_hook">object_pairs_hook</a></code> will be used instead of the <code>dict</code>.
This feature can be used to implement custom decoders.
If <code><a href="#CustomJSONDecoder.object_hook">object_hook</a></code> is also defined, the <code><a href="#CustomJSONDecoder.object_pairs_hook">object_pairs_hook</a></code> takes
priority.</p>

<p><code><a href="#CustomJSONDecoder.parse_float">parse_float</a></code>, if specified, will be called with the string
of every JSON float to be decoded. By default this is equivalent to
float(num_str). This can be used to use another datatype or parser
for JSON floats (e.g. decimal.Decimal).</p>

<p><code><a href="#CustomJSONDecoder.parse_int">parse_int</a></code>, if specified, will be called with the string
of every JSON int to be decoded. By default this is equivalent to
int(num_str). This can be used to use another datatype or parser
for JSON integers (e.g. float).</p>

<p><code><a href="#CustomJSONDecoder.parse_constant">parse_constant</a></code>, if specified, will be called with one of the
following strings: -Infinity, Infinity, NaN.
This can be used to raise an exception if invalid JSON numbers
are encountered.</p>

<p>If <code><a href="#CustomJSONDecoder.strict">strict</a></code> is false (true is the default), then control
characters will be allowed inside strings.  Control characters in
this context are those with character codes in the 0-31 range,
including <code>'\t'</code> (tab), <code>'\n'</code>, <code>'\r'</code> and <code>'\0'</code>.</p>
</div>


                            </div>
                            <div id="CustomJSONDecoder.object_hook" class="classattr">
                                        <input id="CustomJSONDecoder.object_hook-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">object_hook</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">obj</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CustomJSONDecoder.object_hook-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CustomJSONDecoder.object_hook"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CustomJSONDecoder.object_hook-263"><a href="#CustomJSONDecoder.object_hook-263"><span class="linenos">263</span></a>	<span class="k">def</span> <span class="nf">object_hook</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
</span><span id="CustomJSONDecoder.object_hook-264"><a href="#CustomJSONDecoder.object_hook-264"><span class="linenos">264</span></a>		<span class="c1"># handling the resolution of nested objects</span>
</span><span id="CustomJSONDecoder.object_hook-265"><a href="#CustomJSONDecoder.object_hook-265"><span class="linenos">265</span></a>		<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="CustomJSONDecoder.object_hook-266"><a href="#CustomJSONDecoder.object_hook-266"><span class="linenos">266</span></a>			<span class="n">keys_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</span><span id="CustomJSONDecoder.object_hook-267"><a href="#CustomJSONDecoder.object_hook-267"><span class="linenos">267</span></a>
</span><span id="CustomJSONDecoder.object_hook-268"><a href="#CustomJSONDecoder.object_hook-268"><span class="linenos">268</span></a>			<span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys_set</span><span class="p">:</span>
</span><span id="CustomJSONDecoder.object_hook-269"><a href="#CustomJSONDecoder.object_hook-269"><span class="linenos">269</span></a>				<span class="n">obj</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">object_hook</span><span class="p">(</span><span class="n">obj</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
</span><span id="CustomJSONDecoder.object_hook-270"><a href="#CustomJSONDecoder.object_hook-270"><span class="linenos">270</span></a>
</span><span id="CustomJSONDecoder.object_hook-271"><a href="#CustomJSONDecoder.object_hook-271"><span class="linenos">271</span></a>			<span class="c1"># check for quaternion</span>
</span><span id="CustomJSONDecoder.object_hook-272"><a href="#CustomJSONDecoder.object_hook-272"><span class="linenos">272</span></a>			<span class="k">if</span> <span class="n">keys_set</span> <span class="o">==</span> <span class="p">{</span><span class="s2">&quot;q&quot;</span><span class="p">}:</span>
</span><span id="CustomJSONDecoder.object_hook-273"><a href="#CustomJSONDecoder.object_hook-273"><span class="linenos">273</span></a>				<span class="k">return</span> <span class="n">Quaternion</span><span class="p">(</span><span class="n">obj</span><span class="p">[</span><span class="s2">&quot;q&quot;</span><span class="p">])</span>
</span><span id="CustomJSONDecoder.object_hook-274"><a href="#CustomJSONDecoder.object_hook-274"><span class="linenos">274</span></a>
</span><span id="CustomJSONDecoder.object_hook-275"><a href="#CustomJSONDecoder.object_hook-275"><span class="linenos">275</span></a>			<span class="c1"># check if the dict is a signature of a class</span>
</span><span id="CustomJSONDecoder.object_hook-276"><a href="#CustomJSONDecoder.object_hook-276"><span class="linenos">276</span></a>			<span class="k">for</span> <span class="n">signature</span><span class="p">,</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="n">signature_class_mapping</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="CustomJSONDecoder.object_hook-277"><a href="#CustomJSONDecoder.object_hook-277"><span class="linenos">277</span></a>				<span class="k">if</span> <span class="n">signature</span> <span class="o">==</span> <span class="n">keys_set</span><span class="p">:</span>
</span><span id="CustomJSONDecoder.object_hook-278"><a href="#CustomJSONDecoder.object_hook-278"><span class="linenos">278</span></a>					<span class="k">if</span> <span class="s2">&quot;uuid&quot;</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="CustomJSONDecoder.object_hook-279"><a href="#CustomJSONDecoder.object_hook-279"><span class="linenos">279</span></a>						<span class="n">ret</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">get_or_none</span><span class="p">(</span><span class="n">uuid</span><span class="o">=</span><span class="n">obj</span><span class="p">[</span><span class="s2">&quot;uuid&quot;</span><span class="p">])</span>
</span><span id="CustomJSONDecoder.object_hook-280"><a href="#CustomJSONDecoder.object_hook-280"><span class="linenos">280</span></a>						<span class="k">if</span> <span class="n">ret</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CustomJSONDecoder.object_hook-281"><a href="#CustomJSONDecoder.object_hook-281"><span class="linenos">281</span></a>							<span class="c1"># update the object with the new values</span>
</span><span id="CustomJSONDecoder.object_hook-282"><a href="#CustomJSONDecoder.object_hook-282"><span class="linenos">282</span></a>							<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="CustomJSONDecoder.object_hook-283"><a href="#CustomJSONDecoder.object_hook-283"><span class="linenos">283</span></a>								<span class="nb">setattr</span><span class="p">(</span><span class="n">ret</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="CustomJSONDecoder.object_hook-284"><a href="#CustomJSONDecoder.object_hook-284"><span class="linenos">284</span></a>							<span class="n">ret</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="CustomJSONDecoder.object_hook-285"><a href="#CustomJSONDecoder.object_hook-285"><span class="linenos">285</span></a>
</span><span id="CustomJSONDecoder.object_hook-286"><a href="#CustomJSONDecoder.object_hook-286"><span class="linenos">286</span></a>							<span class="k">return</span> <span class="n">ret</span>
</span><span id="CustomJSONDecoder.object_hook-287"><a href="#CustomJSONDecoder.object_hook-287"><span class="linenos">287</span></a><span class="w">					</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="CustomJSONDecoder.object_hook-288"><a href="#CustomJSONDecoder.object_hook-288"><span class="linenos">288</span></a><span class="sd">                    # remove relation information from dict</span>
</span><span id="CustomJSONDecoder.object_hook-289"><a href="#CustomJSONDecoder.object_hook-289"><span class="linenos">289</span></a><span class="sd">                    obj = {k: v for k, v in obj.items() if</span>
</span><span id="CustomJSONDecoder.object_hook-290"><a href="#CustomJSONDecoder.object_hook-290"><span class="linenos">290</span></a><span class="sd">                           not issubclass(type(getattr(cls, k)), RelationshipDefinition)}</span>
</span><span id="CustomJSONDecoder.object_hook-291"><a href="#CustomJSONDecoder.object_hook-291"><span class="linenos">291</span></a><span class="sd">                    &quot;&quot;&quot;</span>
</span><span id="CustomJSONDecoder.object_hook-292"><a href="#CustomJSONDecoder.object_hook-292"><span class="linenos">292</span></a>					<span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="o">**</span><span class="n">obj</span><span class="p">)</span>
</span><span id="CustomJSONDecoder.object_hook-293"><a href="#CustomJSONDecoder.object_hook-293"><span class="linenos">293</span></a>			<span class="k">else</span><span class="p">:</span>
</span><span id="CustomJSONDecoder.object_hook-294"><a href="#CustomJSONDecoder.object_hook-294"><span class="linenos">294</span></a>				<span class="k">return</span> <span class="n">obj</span>
</span><span id="CustomJSONDecoder.object_hook-295"><a href="#CustomJSONDecoder.object_hook-295"><span class="linenos">295</span></a>
</span><span id="CustomJSONDecoder.object_hook-296"><a href="#CustomJSONDecoder.object_hook-296"><span class="linenos">296</span></a>		<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="CustomJSONDecoder.object_hook-297"><a href="#CustomJSONDecoder.object_hook-297"><span class="linenos">297</span></a>			<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">obj</span><span class="p">)):</span>
</span><span id="CustomJSONDecoder.object_hook-298"><a href="#CustomJSONDecoder.object_hook-298"><span class="linenos">298</span></a>				<span class="n">obj</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">object_hook</span><span class="p">(</span><span class="n">obj</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</span><span id="CustomJSONDecoder.object_hook-299"><a href="#CustomJSONDecoder.object_hook-299"><span class="linenos">299</span></a>
</span><span id="CustomJSONDecoder.object_hook-300"><a href="#CustomJSONDecoder.object_hook-300"><span class="linenos">300</span></a>			<span class="k">return</span> <span class="n">obj</span>
</span><span id="CustomJSONDecoder.object_hook-301"><a href="#CustomJSONDecoder.object_hook-301"><span class="linenos">301</span></a>
</span><span id="CustomJSONDecoder.object_hook-302"><a href="#CustomJSONDecoder.object_hook-302"><span class="linenos">302</span></a>		<span class="k">return</span> <span class="n">obj</span>
</span></pre></div>


    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt>json.decoder.JSONDecoder</dt>
                                <dd id="CustomJSONDecoder.parse_float" class="variable">parse_float</dd>
                <dd id="CustomJSONDecoder.parse_int" class="variable">parse_int</dd>
                <dd id="CustomJSONDecoder.parse_constant" class="variable">parse_constant</dd>
                <dd id="CustomJSONDecoder.strict" class="variable">strict</dd>
                <dd id="CustomJSONDecoder.object_pairs_hook" class="variable">object_pairs_hook</dd>
                <dd id="CustomJSONDecoder.parse_object" class="variable">parse_object</dd>
                <dd id="CustomJSONDecoder.parse_array" class="variable">parse_array</dd>
                <dd id="CustomJSONDecoder.parse_string" class="variable">parse_string</dd>
                <dd id="CustomJSONDecoder.memo" class="variable">memo</dd>
                <dd id="CustomJSONDecoder.scan_once" class="variable">scan_once</dd>
                <dd id="CustomJSONDecoder.decode" class="function">decode</dd>
                <dd id="CustomJSONDecoder.raw_decode" class="function">raw_decode</dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="CustomJSONProperty">
                            <input id="CustomJSONProperty-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">CustomJSONProperty</span><wbr>(<span class="base">neomodel.properties.JSONProperty</span>):

                <label class="view-source-button" for="CustomJSONProperty-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CustomJSONProperty"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CustomJSONProperty-305"><a href="#CustomJSONProperty-305"><span class="linenos">305</span></a><span class="k">class</span> <span class="nc">CustomJSONProperty</span><span class="p">(</span><span class="n">neomodel</span><span class="o">.</span><span class="n">JSONProperty</span><span class="p">):</span>
</span><span id="CustomJSONProperty-306"><a href="#CustomJSONProperty-306"><span class="linenos">306</span></a><span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="CustomJSONProperty-307"><a href="#CustomJSONProperty-307"><span class="linenos">307</span></a><span class="sd">	Property for storing specific data types as JSON objects in Neo4j</span>
</span><span id="CustomJSONProperty-308"><a href="#CustomJSONProperty-308"><span class="linenos">308</span></a><span class="sd">	&quot;&quot;&quot;</span>
</span><span id="CustomJSONProperty-309"><a href="#CustomJSONProperty-309"><span class="linenos">309</span></a>
</span><span id="CustomJSONProperty-310"><a href="#CustomJSONProperty-310"><span class="linenos">310</span></a>	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="CustomJSONProperty-311"><a href="#CustomJSONProperty-311"><span class="linenos">311</span></a>		<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="CustomJSONProperty-312"><a href="#CustomJSONProperty-312"><span class="linenos">312</span></a>
</span><span id="CustomJSONProperty-313"><a href="#CustomJSONProperty-313"><span class="linenos">313</span></a>	<span class="nd">@validator</span>
</span><span id="CustomJSONProperty-314"><a href="#CustomJSONProperty-314"><span class="linenos">314</span></a>	<span class="k">def</span> <span class="nf">inflate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataModelBase</span><span class="p">:</span>
</span><span id="CustomJSONProperty-315"><a href="#CustomJSONProperty-315"><span class="linenos">315</span></a>		<span class="k">return</span> <span class="n">CustomJSONDecoder</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span id="CustomJSONProperty-316"><a href="#CustomJSONProperty-316"><span class="linenos">316</span></a>
</span><span id="CustomJSONProperty-317"><a href="#CustomJSONProperty-317"><span class="linenos">317</span></a>	<span class="nd">@validator</span>
</span><span id="CustomJSONProperty-318"><a href="#CustomJSONProperty-318"><span class="linenos">318</span></a>	<span class="k">def</span> <span class="nf">deflate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">DataModelBase</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="CustomJSONProperty-319"><a href="#CustomJSONProperty-319"><span class="linenos">319</span></a>		<span class="k">return</span> <span class="n">CustomJSONEncoder</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Property for storing specific data types as JSON objects in Neo4j</p>
</div>


                            <div id="CustomJSONProperty.__init__" class="classattr">
                                        <input id="CustomJSONProperty.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">CustomJSONProperty</span><span class="signature pdoc-code condensed">(<span class="param"><span class="o">*</span><span class="n">args</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span>)</span>

                <label class="view-source-button" for="CustomJSONProperty.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CustomJSONProperty.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CustomJSONProperty.__init__-310"><a href="#CustomJSONProperty.__init__-310"><span class="linenos">310</span></a>	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="CustomJSONProperty.__init__-311"><a href="#CustomJSONProperty.__init__-311"><span class="linenos">311</span></a>		<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="CustomJSONProperty.inflate" class="classattr">
                                        <input id="CustomJSONProperty.inflate-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@validator</div>

        <span class="def">def</span>
        <span class="name">inflate</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">value</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="n"><a href="#DataModelBase">DataModelBase</a></span>:</span></span>

                <label class="view-source-button" for="CustomJSONProperty.inflate-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CustomJSONProperty.inflate"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CustomJSONProperty.inflate-313"><a href="#CustomJSONProperty.inflate-313"><span class="linenos">313</span></a>	<span class="nd">@validator</span>
</span><span id="CustomJSONProperty.inflate-314"><a href="#CustomJSONProperty.inflate-314"><span class="linenos">314</span></a>	<span class="k">def</span> <span class="nf">inflate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DataModelBase</span><span class="p">:</span>
</span><span id="CustomJSONProperty.inflate-315"><a href="#CustomJSONProperty.inflate-315"><span class="linenos">315</span></a>		<span class="k">return</span> <span class="n">CustomJSONDecoder</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="CustomJSONProperty.deflate" class="classattr">
                                        <input id="CustomJSONProperty.deflate-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@validator</div>

        <span class="def">def</span>
        <span class="name">deflate</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">value</span><span class="p">:</span> <span class="n"><a href="#DataModelBase">DataModelBase</a></span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="CustomJSONProperty.deflate-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CustomJSONProperty.deflate"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CustomJSONProperty.deflate-317"><a href="#CustomJSONProperty.deflate-317"><span class="linenos">317</span></a>	<span class="nd">@validator</span>
</span><span id="CustomJSONProperty.deflate-318"><a href="#CustomJSONProperty.deflate-318"><span class="linenos">318</span></a>	<span class="k">def</span> <span class="nf">deflate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">DataModelBase</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="CustomJSONProperty.deflate-319"><a href="#CustomJSONProperty.deflate-319"><span class="linenos">319</span></a>		<span class="k">return</span> <span class="n">CustomJSONEncoder</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt>neomodel.properties.Property</dt>
                                <dd id="CustomJSONProperty.form_field_class" class="variable">form_field_class</dd>
                <dd id="CustomJSONProperty.required" class="variable">required</dd>
                <dd id="CustomJSONProperty.unique_index" class="variable">unique_index</dd>
                <dd id="CustomJSONProperty.index" class="variable">index</dd>
                <dd id="CustomJSONProperty.default" class="variable">default</dd>
                <dd id="CustomJSONProperty.has_default" class="variable">has_default</dd>
                <dd id="CustomJSONProperty.db_property" class="variable">db_property</dd>
                <dd id="CustomJSONProperty.label" class="variable">label</dd>
                <dd id="CustomJSONProperty.help_text" class="variable">help_text</dd>
                <dd id="CustomJSONProperty.default_value" class="function">default_value</dd>
                <dd id="CustomJSONProperty.is_indexed" class="variable">is_indexed</dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="map_model">
                            <input id="map_model-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">map_model</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">database_url</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="map_model-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#map_model"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="map_model-322"><a href="#map_model-322"><span class="linenos">322</span></a><span class="k">def</span> <span class="nf">map_model</span><span class="p">(</span><span class="n">database_url</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="map_model-323"><a href="#map_model-323"><span class="linenos">323</span></a>	<span class="k">global</span> <span class="n">signature_class_mapping</span><span class="p">,</span> <span class="n">class_signature_mapping</span>
</span><span id="map_model-324"><a href="#map_model-324"><span class="linenos">324</span></a>
</span><span id="map_model-325"><a href="#map_model-325"><span class="linenos">325</span></a>	<span class="kn">from</span> <span class="nn">open_precision.core.model.action</span> <span class="kn">import</span> <span class="n">Action</span>
</span><span id="map_model-326"><a href="#map_model-326"><span class="linenos">326</span></a>	<span class="kn">from</span> <span class="nn">open_precision.core.model.action_response</span> <span class="kn">import</span> <span class="n">ActionResponse</span>
</span><span id="map_model-327"><a href="#map_model-327"><span class="linenos">327</span></a>	<span class="kn">from</span> <span class="nn">open_precision.core.model.course</span> <span class="kn">import</span> <span class="n">Course</span>
</span><span id="map_model-328"><a href="#map_model-328"><span class="linenos">328</span></a>	<span class="kn">from</span> <span class="nn">open_precision.core.model.location</span> <span class="kn">import</span> <span class="n">Location</span>
</span><span id="map_model-329"><a href="#map_model-329"><span class="linenos">329</span></a>	<span class="kn">from</span> <span class="nn">open_precision.core.model.orientation</span> <span class="kn">import</span> <span class="n">Orientation</span>
</span><span id="map_model-330"><a href="#map_model-330"><span class="linenos">330</span></a>	<span class="kn">from</span> <span class="nn">open_precision.core.model.path</span> <span class="kn">import</span> <span class="n">Path</span>
</span><span id="map_model-331"><a href="#map_model-331"><span class="linenos">331</span></a>	<span class="kn">from</span> <span class="nn">open_precision.core.model.position</span> <span class="kn">import</span> <span class="n">Position</span>
</span><span id="map_model-332"><a href="#map_model-332"><span class="linenos">332</span></a>	<span class="kn">from</span> <span class="nn">open_precision.core.model.vehicle</span> <span class="kn">import</span> <span class="n">Vehicle</span>
</span><span id="map_model-333"><a href="#map_model-333"><span class="linenos">333</span></a>	<span class="kn">from</span> <span class="nn">open_precision.core.model.vehicle_state</span> <span class="kn">import</span> <span class="n">VehicleState</span>
</span><span id="map_model-334"><a href="#map_model-334"><span class="linenos">334</span></a>	<span class="kn">from</span> <span class="nn">open_precision.core.model.waypoint</span> <span class="kn">import</span> <span class="n">Waypoint</span>
</span><span id="map_model-335"><a href="#map_model-335"><span class="linenos">335</span></a>
</span><span id="map_model-336"><a href="#map_model-336"><span class="linenos">336</span></a>	<span class="n">neomodel</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">set_connection</span><span class="p">(</span><span class="n">database_url</span><span class="p">)</span>  <span class="c1"># database_url)</span>
</span><span id="map_model-337"><a href="#map_model-337"><span class="linenos">337</span></a>
</span><span id="map_model-338"><a href="#map_model-338"><span class="linenos">338</span></a>	<span class="n">data_model_classes</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">DataModelBase</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="map_model-339"><a href="#map_model-339"><span class="linenos">339</span></a>		<span class="n">Action</span><span class="p">,</span>
</span><span id="map_model-340"><a href="#map_model-340"><span class="linenos">340</span></a>		<span class="n">ActionResponse</span><span class="p">,</span>
</span><span id="map_model-341"><a href="#map_model-341"><span class="linenos">341</span></a>		<span class="n">Course</span><span class="p">,</span>
</span><span id="map_model-342"><a href="#map_model-342"><span class="linenos">342</span></a>		<span class="n">Location</span><span class="p">,</span>
</span><span id="map_model-343"><a href="#map_model-343"><span class="linenos">343</span></a>		<span class="n">Orientation</span><span class="p">,</span>
</span><span id="map_model-344"><a href="#map_model-344"><span class="linenos">344</span></a>		<span class="n">Path</span><span class="p">,</span>
</span><span id="map_model-345"><a href="#map_model-345"><span class="linenos">345</span></a>		<span class="n">Position</span><span class="p">,</span>
</span><span id="map_model-346"><a href="#map_model-346"><span class="linenos">346</span></a>		<span class="n">Vehicle</span><span class="p">,</span>
</span><span id="map_model-347"><a href="#map_model-347"><span class="linenos">347</span></a>		<span class="n">VehicleState</span><span class="p">,</span>
</span><span id="map_model-348"><a href="#map_model-348"><span class="linenos">348</span></a>		<span class="n">Waypoint</span><span class="p">,</span>
</span><span id="map_model-349"><a href="#map_model-349"><span class="linenos">349</span></a>	<span class="p">]</span>
</span><span id="map_model-350"><a href="#map_model-350"><span class="linenos">350</span></a>
</span><span id="map_model-351"><a href="#map_model-351"><span class="linenos">351</span></a>	<span class="n">neomodel</span><span class="o">.</span><span class="n">remove_all_labels</span><span class="p">()</span>
</span><span id="map_model-352"><a href="#map_model-352"><span class="linenos">352</span></a>	<span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="n">data_model_classes</span><span class="p">:</span>
</span><span id="map_model-353"><a href="#map_model-353"><span class="linenos">353</span></a>		<span class="n">neomodel</span><span class="o">.</span><span class="n">install_labels</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
</span><span id="map_model-354"><a href="#map_model-354"><span class="linenos">354</span></a>
</span><span id="map_model-355"><a href="#map_model-355"><span class="linenos">355</span></a>	<span class="c1"># generate class signature mapping for deserialization of json to data model classes</span>
</span><span id="map_model-356"><a href="#map_model-356"><span class="linenos">356</span></a>	<span class="n">signature_class_mapping</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="map_model-357"><a href="#map_model-357"><span class="linenos">357</span></a>		<span class="n">get_attributes</span><span class="p">(</span>
</span><span id="map_model-358"><a href="#map_model-358"><span class="linenos">358</span></a>			<span class="bp">cls</span><span class="p">,</span>
</span><span id="map_model-359"><a href="#map_model-359"><span class="linenos">359</span></a>			<span class="n">base_filter</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="n">DataModelBase</span><span class="p">,</span> <span class="n">StructuredNode</span><span class="p">],</span>
</span><span id="map_model-360"><a href="#map_model-360"><span class="linenos">360</span></a>			<span class="n">property_name_filter</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="ow">not</span> <span class="n">x</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">))</span>
</span><span id="map_model-361"><a href="#map_model-361"><span class="linenos">361</span></a>			<span class="ow">and</span> <span class="p">(</span>
</span><span id="map_model-362"><a href="#map_model-362"><span class="linenos">362</span></a>				<span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;DoesNotExist&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">]</span>
</span><span id="map_model-363"><a href="#map_model-363"><span class="linenos">363</span></a>				<span class="k">if</span> <span class="nb">issubclass</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">StructuredNode</span><span class="p">)</span>
</span><span id="map_model-364"><a href="#map_model-364"><span class="linenos">364</span></a>				<span class="k">else</span> <span class="kc">True</span>
</span><span id="map_model-365"><a href="#map_model-365"><span class="linenos">365</span></a>			<span class="p">),</span>
</span><span id="map_model-366"><a href="#map_model-366"><span class="linenos">366</span></a>			<span class="n">property_type_filter</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">FunctionType</span>
</span><span id="map_model-367"><a href="#map_model-367"><span class="linenos">367</span></a>			<span class="ow">and</span> <span class="ow">not</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">RelationshipDefinition</span><span class="p">),</span>
</span><span id="map_model-368"><a href="#map_model-368"><span class="linenos">368</span></a>		<span class="p">):</span> <span class="bp">cls</span>
</span><span id="map_model-369"><a href="#map_model-369"><span class="linenos">369</span></a>		<span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="n">data_model_classes</span>
</span><span id="map_model-370"><a href="#map_model-370"><span class="linenos">370</span></a>	<span class="p">}</span>
</span><span id="map_model-371"><a href="#map_model-371"><span class="linenos">371</span></a>
</span><span id="map_model-372"><a href="#map_model-372"><span class="linenos">372</span></a>	<span class="n">class_signature_mapping</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="map_model-373"><a href="#map_model-373"><span class="linenos">373</span></a>		<span class="n">v</span><span class="p">:</span> <span class="n">k</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">signature_class_mapping</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
</span><span id="map_model-374"><a href="#map_model-374"><span class="linenos">374</span></a>	<span class="p">}</span>  <span class="c1"># reverse lookup table for signature_class_mapping</span>
</span><span id="map_model-375"><a href="#map_model-375"><span class="linenos">375</span></a>
</span><span id="map_model-376"><a href="#map_model-376"><span class="linenos">376</span></a>	<span class="nb">print</span><span class="p">(</span><span class="n">class_signature_mapping</span><span class="p">)</span>
</span></pre></div>


    

                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>